(()=>{"use strict";class e{constructor(e){this.name=e,this.arrayOfTodos=[]}}function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function n(e){t(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function r(e){t(1,arguments);var r=n(e);return r.setHours(0,0,0,0),r}function o(e,n){t(2,arguments);var o=r(e),a=r(n);return o.getTime()===a.getTime()}function a(e){return t(1,arguments),o(e,Date.now())}Math.pow(10,8);var c=36e5;function i(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function l(e,n){t(1,arguments);var r=n||{},o=null==r.additionalDigits?2:i(r.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var a,c=p(e);if(c.date){var l=f(c.date,o);a=g(l.restDateString,l.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var u,s=a.getTime(),d=0;if(c.time&&(d=v(c.time),isNaN(d)))return new Date(NaN);if(!c.timezone){var m=new Date(s+d),y=new Date(0);return y.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),y.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),y}return u=b(c.timezone),isNaN(u)?new Date(NaN):new Date(s+d+u)}var u={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},s=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,m=/^([+-])(\d{2})(?::?(\d{2}))?$/;function p(e){var t,n={},r=e.split(u.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],u.timeZoneDelimiter.test(n.date)&&(n.date=e.split(u.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=u.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function f(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}function g(e,t){if(null===t)return new Date(NaN);var n=e.match(s);if(!n)return new Date(NaN);var r=!!n[4],o=y(n[1]),a=y(n[2])-1,c=y(n[3]),i=y(n[4]),l=y(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,i,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(t,i,l):new Date(NaN);var u=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(C[t]||(N(e)?29:28))}(t,a,c)&&function(e,t){return t>=1&&t<=(N(e)?366:365)}(t,o)?(u.setUTCFullYear(t,a,Math.max(o,c)),u):new Date(NaN)}function y(e){return e?parseInt(e):1}function v(e){var t=e.match(d);if(!t)return NaN;var n=h(t[1]),r=h(t[2]),o=h(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o)?n*c+6e4*r+1e3*o:NaN}function h(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(m);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(r*c+6e4*o):NaN}var C=[31,null,31,30,31,30,31,31,30,31,30,31];function N(e){return e%400==0||e%4==0&&e%100!=0}function S(e,r){t(2,arguments);var o=n(e),a=n(r);return o.getTime()>a.getTime()}let E=[];function x(){document.querySelector(".projects").textContent="",E.forEach((e=>{let t=0;const n=document.createElement("div");n.className="project",n.textContent=e.name;const r=document.createElement("button");r.classList.add("project__btn"),r.textContent="x",r.addEventListener("click",(()=>{var n;document.querySelector(".create-button").textContent="",n=e,E=E.filter((e=>e!==n)),localStorage.setItem("projects",JSON.stringify(E)),x(),document.querySelector(".content").textContent="",t=1})),n.addEventListener("click",(()=>{0==t&&k(e)})),n.appendChild(r),"Inbox"!==e.name&&document.querySelector(".projects").appendChild(n)}))}function T(){document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="";let e=document.createElement("div");e.className="today",j("Today"),E.forEach((e=>{for(let t in e.arrayOfTodos)e.arrayOfTodos[t]&&a(l(e.arrayOfTodos[t].date))&&k(e,t)})),document.querySelector(".today").appendChild(e)}function D(){document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="";let e=document.createElement("div");e.className="upcoming",j("Upcoming"),E.forEach((e=>{for(let t in e.arrayOfTodos)S(l(e.arrayOfTodos[t].date),new Date)&&k(e,t,"upcoming")})),document.querySelector(".upcoming").appendChild(e)}function k(e,t,n){t||(document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="",j(e));for(let r in e.arrayOfTodos){const o=document.createElement("div");o.className="task";const a=document.createElement("div");a.textContent="",a.className="task__checkbox",o.appendChild(a);const c=document.createElement("div");c.textContent=e.arrayOfTodos[r].name,c.className="task__name",o.appendChild(c);const i=document.createElement("div");i.textContent="Project: "+e.name,i.className="task__origin",o.appendChild(i);const l=document.createElement("div");l.textContent=e.arrayOfTodos[r].taskDescription,l.className="task__taskDescription",o.appendChild(l);const u=document.createElement("div");switch(o.appendChild(u),u.className="task__date",u.textContent=e.arrayOfTodos[r].date,e.arrayOfTodos[r].priority){case"1":a.style.background="red";break;case"2":a.style.background="orange";break;case"3":a.style.background="yellow";break;case"0":a.style.background="white"}a.addEventListener("click",(()=>{var o;o=r,e.arrayOfTodos.splice(o,1),localStorage.setItem("projects",JSON.stringify(E)),t?t&&"upcoming"==n?D():T():k(e)})),t?t==r&&document.querySelector(".content").appendChild(o):document.querySelector(".content").appendChild(o)}t||q(e),localStorage.setItem("projects",JSON.stringify(E))}function j(e){e.name?document.querySelector(".project-name").textContent=e.name:document.querySelector(".project-name").textContent=e}function w(e){return E.filter((t=>t.name==e)).length>0}function q(e){let t=document.createElement("button");document.querySelector(".create-button").appendChild(t),t.textContent="Create todo",t.className="create-button__btn",t.addEventListener("click",(()=>{!function(e){let t=document.querySelector(".popup-container");t.style.transform="scale(1)",document.body.addEventListener("click",(function(e){e.target==t&&(t.style.transform="scale(0)")})),document.querySelector(".form__submit-button").addEventListener("click",_,!1),document.querySelector(".form__submit-button").parameter=e}(e)}))}function _(e){let t=document.getElementById("taskname").value,n=document.getElementById("description").value,r=document.getElementById("date").value,o=document.getElementById("priority").value;if(r=new Date(r),t){let a=function(e,t,n,r){return{name:e,description:t,date:n,priority:r}}(t,n,r,o);e.currentTarget.parameter.arrayOfTodos.push(a),localStorage.setItem("projects",JSON.stringify(E)),document.querySelector(".popup-container").style.transform="scale(0)",k(e.currentTarget.parameter)}else alert("Enter task name")}"projects"in localStorage&&(E=JSON.parse(localStorage.getItem("projects")||[]),console.log(E)),function(){j("Inbox");let t=new e("Inbox");0==E.filter((e=>"Inbox"==e.name)).length&&E.push(t),q(t),localStorage.setItem("projects",JSON.stringify(E)),E.filter((e=>"Inbox"==e.name)).length>0?k(E[0]):k(t),document.querySelector(".inbox").addEventListener("click",(()=>{console.log(E),E.filter((e=>"Inbox"==e.name)).length>0?k(E[0]):k(t)}))}(),x(),document.querySelector(".today").addEventListener("click",T),document.querySelector(".upcoming").addEventListener("click",D),document.querySelector(".projects__btn").addEventListener("click",(function t(){this.removeEventListener("click",t);const n=document.querySelector(".projects"),r=document.createElement("button");r.classList.add("projects__btn","projects__btn--close"),r.textContent="x",r.addEventListener("click",(()=>{n.removeChild(o),n.removeChild(a),n.removeChild(r),this.addEventListener("click",t)}));const o=document.createElement("input");o.setAttribute("type","text"),o.classList.add("projects__name-input"),n.appendChild(o);const a=document.createElement("button");r.classList.add("projects__btn","projects__btn--submit"),n.appendChild(r),a.textContent="Ok",n.appendChild(a),a.addEventListener("click",(()=>{let r=o.value;r&&r.length<16&&!w(r)?(n.removeChild(o),n.removeChild(a),document.querySelector(".create-button").textContent="",document.querySelector(".project-name").textContent=r,function(t){let n=new e(t);if(E.push(n),document.querySelector(".content").textContent="",q(n),localStorage.setItem("projects",JSON.stringify(E)),"Inbox"==t)return n;x()}(r),this.addEventListener("click",t)):1==w(r)?(alert("Project names should be different"),o.value=""):r.length>=16?alert("Project name should be less than 16 characters"):r||alert("Enter project name")}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FBYyxZQUFZQyxZQUFjLEdBRWpEc0MsRUFBVzNCLEdBRVhFLGFBQWFDLFFBQVEsV0FBWUMsS0FBS0MsVUFBVXBCLElBRXJDLFNBQVIvSCxFQUFpQixPQUFPOEksRUFFM0JkLElBdU1ReUUsQ0FBY3pNLEdBRWRDLEtBQUs0SSxpQkFBaUIsUUFBU29ELElBQ0ssR0FBL0J2QixFQUFzQjFLLElBQzNCMkwsTUFBTSxxQ0FDTlcsRUFBb0JyRixNQUFRLElBQ3ZCakgsRUFBS00sUUFBVSxHQUNwQnFMLE1BQU0sa0RBQ0EzTCxHQUNOMkwsTUFBTSw2QiIsInNvdXJjZXMiOlsid2VicGFjazovL3BhY2thZ2UvLi9zcmMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vY29uc3RhbnRzL2luZGV4LmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3BhcnNlSVNPL2luZGV4LmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzQWZ0ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL3NyYy91cGRhdGVQcm9qZWN0c0RPTS5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vc3JjL3VwZGF0ZVRvZG9zRE9NLmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9zcmMvdG9kb3MuanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQcm9qZWN0e1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpe1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmFycmF5T2ZUb2RvcyA9IFtdO1xuICAgIH1cbiAgICBcbiAgICAvL2Z1bmN0aW9ucyB0byBhbHRlciB0YXNrcyBpbnNpZGUgYSBwcm9qZWN0XG59XG5cbmV4cG9ydCB7UHJvamVjdH07IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aClcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTQsIDksIDQpKVxuICogLy89PiBmYWxzZVxuICogXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIHZhciByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiLyoqXG4gKiBEYXlzIGluIDEgd2Vlay5cbiAqXG4gKiBAbmFtZSBkYXlzSW5XZWVrXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5leHBvcnQgdmFyIGRheXNJbldlZWsgPSA3O1xuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAbmFtZSBtYXhUaW1lXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWF4VGltZSA9IE1hdGgucG93KDEwLCA4KSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIG1pbnV0ZVxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luTWludXRlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5NaW51dGUgPSA2MDAwMDtcbi8qKlxuICogTWlsbGlzZWNvbmRzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luSG91clxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kc0luSG91ciA9IDM2MDAwMDA7XG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIHNlY29uZFxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luU2Vjb25kXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5TZWNvbmQgPSAxMDAwO1xuLyoqXG4gKiBNaW5pbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAbmFtZSBtaW5UaW1lXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWluVGltZSA9IC1tYXhUaW1lO1xuLyoqXG4gKiBNaW51dGVzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIG1pbnV0ZXNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtaW51dGVzSW5Ib3VyID0gNjA7XG4vKipcbiAqIE1vbnRocyBpbiAxIHF1YXJ0ZXJcbiAqXG4gKiBAbmFtZSBtb250aHNJblF1YXJ0ZXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtb250aHNJblF1YXJ0ZXIgPSAzO1xuLyoqXG4gKiBNb250aHMgaW4gMSB5ZWFyXG4gKlxuICogQG5hbWUgbW9udGhzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbW9udGhzSW5ZZWFyID0gMTI7XG4vKipcbiAqIFF1YXJ0ZXJzIGluIDEgeWVhclxuICpcbiAqIEBuYW1lIHF1YXJ0ZXJzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgcXVhcnRlcnNJblllYXIgPSA0O1xuLyoqXG4gKiBTZWNvbmRzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIHNlY29uZHNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBzZWNvbmRzSW5Ib3VyID0gMzYwMDtcbi8qKlxuICogU2Vjb25kcyBpbiAxIG1pbnV0ZVxuICpcbiAqIEBuYW1lIHNlY29uZHNJbk1pbnV0ZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIHNlY29uZHNJbk1pbnV0ZSA9IDYwOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwiaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5Ib3VyLCBtaWxsaXNlY29uZHNJbk1pbnV0ZSB9IGZyb20gXCIuLi9jb25zdGFudHMvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBwYXJzZUlTT1xuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBQYXJzZSBJU08gc3RyaW5nXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gc3RyaW5nIGluIElTTyA4NjAxIGZvcm1hdCBhbmQgcmV0dXJuIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogRnVuY3Rpb24gYWNjZXB0cyBjb21wbGV0ZSBJU08gODYwMSBmb3JtYXRzIGFzIHdlbGwgYXMgcGFydGlhbCBpbXBsZW1lbnRhdGlvbnMuXG4gKiBJU08gODYwMTogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMVxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpc24ndCBhIHN0cmluZywgdGhlIGZ1bmN0aW9uIGNhbm5vdCBwYXJzZSB0aGUgc3RyaW5nIG9yXG4gKiB0aGUgdmFsdWVzIGFyZSBpbnZhbGlkLCBpdCByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIC0gVGhlIHByZXZpb3VzIGBwYXJzZWAgaW1wbGVtZW50YXRpb24gd2FzIHJlbmFtZWQgdG8gYHBhcnNlSVNPYC5cbiAqXG4gKiAgIGBgYGphdmFzY3JpcHRcbiAqICAgLy8gQmVmb3JlIHYyLjAuMFxuICogICBwYXJzZSgnMjAxNi0wMS0wMScpXG4gKlxuICogICAvLyB2Mi4wLjAgb253YXJkXG4gKiAgIHBhcnNlSVNPKCcyMDE2LTAxLTAxJylcbiAqICAgYGBgXG4gKlxuICogLSBgcGFyc2VJU09gIG5vdyB2YWxpZGF0ZXMgc2VwYXJhdGUgZGF0ZSBhbmQgdGltZSB2YWx1ZXMgaW4gSVNPLTg2MDEgc3RyaW5nc1xuICogICBhbmQgcmV0dXJucyBgSW52YWxpZCBEYXRlYCBpZiB0aGUgZGF0ZSBpcyBpbnZhbGlkLlxuICpcbiAqICAgYGBgamF2YXNjcmlwdFxuICogICBwYXJzZUlTTygnMjAxOC0xMy0zMicpXG4gKiAgIC8vPT4gSW52YWxpZCBEYXRlXG4gKiAgIGBgYFxuICpcbiAqIC0gYHBhcnNlSVNPYCBub3cgZG9lc24ndCBmYWxsIGJhY2sgdG8gYG5ldyBEYXRlYCBjb25zdHJ1Y3RvclxuICogICBpZiBpdCBmYWlscyB0byBwYXJzZSBhIHN0cmluZyBhcmd1bWVudC4gSW5zdGVhZCwgaXQgcmV0dXJucyBgSW52YWxpZCBEYXRlYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0gezB8MXwyfSBbb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzPTJdIC0gdGhlIGFkZGl0aW9uYWwgbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgZXh0ZW5kZWQgeWVhciBmb3JtYXRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzYCBtdXN0IGJlIDAsIDEgb3IgMlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHN0cmluZyAnMjAxNC0wMi0xMVQxMTozMDozMCcgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHBhcnNlSVNPKCcyMDE0LTAyLTExVDExOjMwOjMwJylcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgc3RyaW5nICcrMDIwMTQxMDEnIHRvIGRhdGUsXG4gKiAvLyBpZiB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdCBpcyAxOlxuICogY29uc3QgcmVzdWx0ID0gcGFyc2VJU08oJyswMjAxNDEwMScsIHsgYWRkaXRpb25hbERpZ2l0czogMSB9KVxuICogLy89PiBGcmkgQXByIDExIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUlTTyhhcmd1bWVudCwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTtcbiAgdmFyIGFkZGl0aW9uYWxEaWdpdHMgPSBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHMgPT0gbnVsbCA/IDIgOiB0b0ludGVnZXIob3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzKTtcblxuICBpZiAoYWRkaXRpb25hbERpZ2l0cyAhPT0gMiAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAxICYmIGFkZGl0aW9uYWxEaWdpdHMgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYWRkaXRpb25hbERpZ2l0cyBtdXN0IGJlIDAsIDEgb3IgMicpO1xuICB9XG5cbiAgaWYgKCEodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpID09PSAnW29iamVjdCBTdHJpbmddJykpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxuXG4gIHZhciBkYXRlU3RyaW5ncyA9IHNwbGl0RGF0ZVN0cmluZyhhcmd1bWVudCk7XG4gIHZhciBkYXRlO1xuXG4gIGlmIChkYXRlU3RyaW5ncy5kYXRlKSB7XG4gICAgdmFyIHBhcnNlWWVhclJlc3VsdCA9IHBhcnNlWWVhcihkYXRlU3RyaW5ncy5kYXRlLCBhZGRpdGlvbmFsRGlnaXRzKTtcbiAgICBkYXRlID0gcGFyc2VEYXRlKHBhcnNlWWVhclJlc3VsdC5yZXN0RGF0ZVN0cmluZywgcGFyc2VZZWFyUmVzdWx0LnllYXIpO1xuICB9XG5cbiAgaWYgKCFkYXRlIHx8IGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG5cbiAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICB2YXIgdGltZSA9IDA7XG4gIHZhciBvZmZzZXQ7XG5cbiAgaWYgKGRhdGVTdHJpbmdzLnRpbWUpIHtcbiAgICB0aW1lID0gcGFyc2VUaW1lKGRhdGVTdHJpbmdzLnRpbWUpO1xuXG4gICAgaWYgKGlzTmFOKHRpbWUpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGF0ZVN0cmluZ3MudGltZXpvbmUpIHtcbiAgICBvZmZzZXQgPSBwYXJzZVRpbWV6b25lKGRhdGVTdHJpbmdzLnRpbWV6b25lKTtcblxuICAgIGlmIChpc05hTihvZmZzZXQpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpcnR5RGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUpOyAvLyBqcyBwYXJzZWQgc3RyaW5nIGFzc3VtaW5nIGl0J3MgaW4gVVRDIHRpbWV6b25lXG4gICAgLy8gYnV0IHdlIG5lZWQgaXQgdG8gYmUgcGFyc2VkIGluIG91ciB0aW1lem9uZVxuICAgIC8vIHNvIHdlIHVzZSB1dGMgdmFsdWVzIHRvIGJ1aWxkIGRhdGUgaW4gb3VyIHRpbWV6b25lLlxuICAgIC8vIFllYXIgdmFsdWVzIGZyb20gMCB0byA5OSBtYXAgdG8gdGhlIHllYXJzIDE5MDAgdG8gMTk5OVxuICAgIC8vIHNvIHNldCB5ZWFyIGV4cGxpY2l0bHkgd2l0aCBzZXRGdWxsWWVhci5cblxuICAgIHZhciByZXN1bHQgPSBuZXcgRGF0ZSgwKTtcbiAgICByZXN1bHQuc2V0RnVsbFllYXIoZGlydHlEYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGRpcnR5RGF0ZS5nZXRVVENNb250aCgpLCBkaXJ0eURhdGUuZ2V0VVRDRGF0ZSgpKTtcbiAgICByZXN1bHQuc2V0SG91cnMoZGlydHlEYXRlLmdldFVUQ0hvdXJzKCksIGRpcnR5RGF0ZS5nZXRVVENNaW51dGVzKCksIGRpcnR5RGF0ZS5nZXRVVENTZWNvbmRzKCksIGRpcnR5RGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lICsgb2Zmc2V0KTtcbn1cbnZhciBwYXR0ZXJucyA9IHtcbiAgZGF0ZVRpbWVEZWxpbWl0ZXI6IC9bVCBdLyxcbiAgdGltZVpvbmVEZWxpbWl0ZXI6IC9bWiBdL2ksXG4gIHRpbWV6b25lOiAvKFtaKy1dLiopJC9cbn07XG52YXIgZGF0ZVJlZ2V4ID0gL14tPyg/OihcXGR7M30pfChcXGR7Mn0pKD86LT8oXFxkezJ9KSk/fFcoXFxkezJ9KSg/Oi0/KFxcZHsxfSkpP3wpJC87XG52YXIgdGltZVJlZ2V4ID0gL14oXFxkezJ9KD86Wy4sXVxcZCopPykoPzo6PyhcXGR7Mn0oPzpbLixdXFxkKik/KSk/KD86Oj8oXFxkezJ9KD86Wy4sXVxcZCopPykpPyQvO1xudmFyIHRpbWV6b25lUmVnZXggPSAvXihbKy1dKShcXGR7Mn0pKD86Oj8oXFxkezJ9KSk/JC87XG5cbmZ1bmN0aW9uIHNwbGl0RGF0ZVN0cmluZyhkYXRlU3RyaW5nKSB7XG4gIHZhciBkYXRlU3RyaW5ncyA9IHt9O1xuICB2YXIgYXJyYXkgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLmRhdGVUaW1lRGVsaW1pdGVyKTtcbiAgdmFyIHRpbWVTdHJpbmc7IC8vIFRoZSByZWdleCBtYXRjaCBzaG91bGQgb25seSByZXR1cm4gYXQgbWF4aW11bSB0d28gYXJyYXkgZWxlbWVudHMuXG4gIC8vIFtkYXRlXSwgW3RpbWVdLCBvciBbZGF0ZSwgdGltZV0uXG5cbiAgaWYgKGFycmF5Lmxlbmd0aCA+IDIpIHtcbiAgICByZXR1cm4gZGF0ZVN0cmluZ3M7XG4gIH1cblxuICBpZiAoLzovLnRlc3QoYXJyYXlbMF0pKSB7XG4gICAgdGltZVN0cmluZyA9IGFycmF5WzBdO1xuICB9IGVsc2Uge1xuICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBhcnJheVswXTtcbiAgICB0aW1lU3RyaW5nID0gYXJyYXlbMV07XG5cbiAgICBpZiAocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIudGVzdChkYXRlU3RyaW5ncy5kYXRlKSkge1xuICAgICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGRhdGVTdHJpbmcuc3BsaXQocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIpWzBdO1xuICAgICAgdGltZVN0cmluZyA9IGRhdGVTdHJpbmcuc3Vic3RyKGRhdGVTdHJpbmdzLmRhdGUubGVuZ3RoLCBkYXRlU3RyaW5nLmxlbmd0aCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRpbWVTdHJpbmcpIHtcbiAgICB2YXIgdG9rZW4gPSBwYXR0ZXJucy50aW1lem9uZS5leGVjKHRpbWVTdHJpbmcpO1xuXG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZy5yZXBsYWNlKHRva2VuWzFdLCAnJyk7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lem9uZSA9IHRva2VuWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0ZVN0cmluZ3M7XG59XG5cbmZ1bmN0aW9uIHBhcnNlWWVhcihkYXRlU3RyaW5nLCBhZGRpdGlvbmFsRGlnaXRzKSB7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ14oPzooXFxcXGR7NH18WystXVxcXFxkeycgKyAoNCArIGFkZGl0aW9uYWxEaWdpdHMpICsgJ30pfChcXFxcZHsyfXxbKy1dXFxcXGR7JyArICgyICsgYWRkaXRpb25hbERpZ2l0cykgKyAnfSkkKScpO1xuICB2YXIgY2FwdHVyZXMgPSBkYXRlU3RyaW5nLm1hdGNoKHJlZ2V4KTsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXJcblxuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4ge1xuICAgIHllYXI6IE5hTixcbiAgICByZXN0RGF0ZVN0cmluZzogJydcbiAgfTtcbiAgdmFyIHllYXIgPSBjYXB0dXJlc1sxXSA/IHBhcnNlSW50KGNhcHR1cmVzWzFdKSA6IG51bGw7XG4gIHZhciBjZW50dXJ5ID0gY2FwdHVyZXNbMl0gPyBwYXJzZUludChjYXB0dXJlc1syXSkgOiBudWxsOyAvLyBlaXRoZXIgeWVhciBvciBjZW50dXJ5IGlzIG51bGwsIG5vdCBib3RoXG5cbiAgcmV0dXJuIHtcbiAgICB5ZWFyOiBjZW50dXJ5ID09PSBudWxsID8geWVhciA6IGNlbnR1cnkgKiAxMDAsXG4gICAgcmVzdERhdGVTdHJpbmc6IGRhdGVTdHJpbmcuc2xpY2UoKGNhcHR1cmVzWzFdIHx8IGNhcHR1cmVzWzJdKS5sZW5ndGgpXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlU3RyaW5nLCB5ZWFyKSB7XG4gIC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyXG4gIGlmICh5ZWFyID09PSBudWxsKSByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgdmFyIGNhcHR1cmVzID0gZGF0ZVN0cmluZy5tYXRjaChkYXRlUmVnZXgpOyAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgc3RyaW5nXG5cbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIHZhciBpc1dlZWtEYXRlID0gISFjYXB0dXJlc1s0XTtcbiAgdmFyIGRheU9mWWVhciA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbMV0pO1xuICB2YXIgbW9udGggPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzJdKSAtIDE7XG4gIHZhciBkYXkgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzNdKTtcbiAgdmFyIHdlZWsgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzRdKTtcbiAgdmFyIGRheU9mV2VlayA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbNV0pIC0gMTtcblxuICBpZiAoaXNXZWVrRGF0ZSkge1xuICAgIGlmICghdmFsaWRhdGVXZWVrRGF0ZSh5ZWFyLCB3ZWVrLCBkYXlPZldlZWspKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF5T2ZJU09XZWVrWWVhcih5ZWFyLCB3ZWVrLCBkYXlPZldlZWspO1xuICB9IGVsc2Uge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCk7XG5cbiAgICBpZiAoIXZhbGlkYXRlRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSB8fCAhdmFsaWRhdGVEYXlPZlllYXJEYXRlKHllYXIsIGRheU9mWWVhcikpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cblxuICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgbW9udGgsIE1hdGgubWF4KGRheU9mWWVhciwgZGF5KSk7XG4gICAgcmV0dXJuIGRhdGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VEYXRlVW5pdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPyBwYXJzZUludCh2YWx1ZSkgOiAxO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWUodGltZVN0cmluZykge1xuICB2YXIgY2FwdHVyZXMgPSB0aW1lU3RyaW5nLm1hdGNoKHRpbWVSZWdleCk7XG4gIGlmICghY2FwdHVyZXMpIHJldHVybiBOYU47IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB0aW1lXG5cbiAgdmFyIGhvdXJzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1sxXSk7XG4gIHZhciBtaW51dGVzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1syXSk7XG4gIHZhciBzZWNvbmRzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1szXSk7XG5cbiAgaWYgKCF2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHJldHVybiBob3VycyAqIG1pbGxpc2Vjb25kc0luSG91ciArIG1pbnV0ZXMgKiBtaWxsaXNlY29uZHNJbk1pbnV0ZSArIHNlY29uZHMgKiAxMDAwO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWVVbml0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UoJywnLCAnLicpKSB8fCAwO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWV6b25lKHRpbWV6b25lU3RyaW5nKSB7XG4gIGlmICh0aW1lem9uZVN0cmluZyA9PT0gJ1onKSByZXR1cm4gMDtcbiAgdmFyIGNhcHR1cmVzID0gdGltZXpvbmVTdHJpbmcubWF0Y2godGltZXpvbmVSZWdleCk7XG4gIGlmICghY2FwdHVyZXMpIHJldHVybiAwO1xuICB2YXIgc2lnbiA9IGNhcHR1cmVzWzFdID09PSAnKycgPyAtMSA6IDE7XG4gIHZhciBob3VycyA9IHBhcnNlSW50KGNhcHR1cmVzWzJdKTtcbiAgdmFyIG1pbnV0ZXMgPSBjYXB0dXJlc1szXSAmJiBwYXJzZUludChjYXB0dXJlc1szXSkgfHwgMDtcblxuICBpZiAoIXZhbGlkYXRlVGltZXpvbmUoaG91cnMsIG1pbnV0ZXMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHJldHVybiBzaWduICogKGhvdXJzICogbWlsbGlzZWNvbmRzSW5Ib3VyICsgbWludXRlcyAqIG1pbGxpc2Vjb25kc0luTWludXRlKTtcbn1cblxuZnVuY3Rpb24gZGF5T2ZJU09XZWVrWWVhcihpc29XZWVrWWVhciwgd2VlaywgZGF5KSB7XG4gIHZhciBkYXRlID0gbmV3IERhdGUoMCk7XG4gIGRhdGUuc2V0VVRDRnVsbFllYXIoaXNvV2Vla1llYXIsIDAsIDQpO1xuICB2YXIgZm91cnRoT2ZKYW51YXJ5RGF5ID0gZGF0ZS5nZXRVVENEYXkoKSB8fCA3O1xuICB2YXIgZGlmZiA9ICh3ZWVrIC0gMSkgKiA3ICsgZGF5ICsgMSAtIGZvdXJ0aE9mSmFudWFyeURheTtcbiAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpICsgZGlmZik7XG4gIHJldHVybiBkYXRlO1xufSAvLyBWYWxpZGF0aW9uIGZ1bmN0aW9uc1xuLy8gRmVicnVhcnkgaXMgbnVsbCB0byBoYW5kbGUgdGhlIGxlYXAgeWVhciAodXNpbmcgfHwpXG5cblxudmFyIGRheXNJbk1vbnRocyA9IFszMSwgbnVsbCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuXG5mdW5jdGlvbiBpc0xlYXBZZWFySW5kZXgoeWVhcikge1xuICByZXR1cm4geWVhciAlIDQwMCA9PT0gMCB8fCB5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgsIGRhdGUpIHtcbiAgcmV0dXJuIG1vbnRoID49IDAgJiYgbW9udGggPD0gMTEgJiYgZGF0ZSA+PSAxICYmIGRhdGUgPD0gKGRheXNJbk1vbnRoc1ttb250aF0gfHwgKGlzTGVhcFllYXJJbmRleCh5ZWFyKSA/IDI5IDogMjgpKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEYXlPZlllYXJEYXRlKHllYXIsIGRheU9mWWVhcikge1xuICByZXR1cm4gZGF5T2ZZZWFyID49IDEgJiYgZGF5T2ZZZWFyIDw9IChpc0xlYXBZZWFySW5kZXgoeWVhcikgPyAzNjYgOiAzNjUpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVdlZWtEYXRlKF95ZWFyLCB3ZWVrLCBkYXkpIHtcbiAgcmV0dXJuIHdlZWsgPj0gMSAmJiB3ZWVrIDw9IDUzICYmIGRheSA+PSAwICYmIGRheSA8PSA2O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgaWYgKGhvdXJzID09PSAyNCkge1xuICAgIHJldHVybiBtaW51dGVzID09PSAwICYmIHNlY29uZHMgPT09IDA7XG4gIH1cblxuICByZXR1cm4gc2Vjb25kcyA+PSAwICYmIHNlY29uZHMgPCA2MCAmJiBtaW51dGVzID49IDAgJiYgbWludXRlcyA8IDYwICYmIGhvdXJzID49IDAgJiYgaG91cnMgPCAyNTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVUaW1lem9uZShfaG91cnMsIG1pbnV0ZXMpIHtcbiAgcmV0dXJuIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDw9IDU5O1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNBZnRlclxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZmlyc3QgZGF0ZSBhZnRlciB0aGUgc2Vjb25kIG9uZT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBmaXJzdCBkYXRlIGFmdGVyIHRoZSBzZWNvbmQgb25lP1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRoYXQgc2hvdWxkIGJlIGFmdGVyIHRoZSBvdGhlciBvbmUgdG8gcmV0dXJuIHRydWVcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVUb0NvbXBhcmUgLSB0aGUgZGF0ZSB0byBjb21wYXJlIHdpdGhcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZmlyc3QgZGF0ZSBpcyBhZnRlciB0aGUgc2Vjb25kIGRhdGVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSXMgMTAgSnVseSAxOTg5IGFmdGVyIDExIEZlYnJ1YXJ5IDE5ODc/XG4gKiB2YXIgcmVzdWx0ID0gaXNBZnRlcihuZXcgRGF0ZSgxOTg5LCA2LCAxMCksIG5ldyBEYXRlKDE5ODcsIDEsIDExKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQWZ0ZXIoZGlydHlEYXRlLCBkaXJ0eURhdGVUb0NvbXBhcmUpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXRlVG9Db21wYXJlID0gdG9EYXRlKGRpcnR5RGF0ZVRvQ29tcGFyZSk7XG4gIHJldHVybiBkYXRlLmdldFRpbWUoKSA+IGRhdGVUb0NvbXBhcmUuZ2V0VGltZSgpO1xufSIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHsgVG9kb0J1dHRvbiB9IGZyb20gXCIuL3VwZGF0ZVRvZG9zRE9NXCI7XG5pbXBvcnQgeyBpc0FmdGVyLCBpc1RvZGF5LCBwYXJzZUlTTywgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG5sZXQgYXJyYXlPZlByb2plY3RzID0gW107XG5cbihmdW5jdGlvbiBjaGVja1Byb2plY3RzT25SZWxvYWQoKSB7XG4gICAgaWYoJ3Byb2plY3RzJyBpbiBsb2NhbFN0b3JhZ2Upe1xuICAgICAgICBhcnJheU9mUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpIHx8IFtdKTtcbiAgICAgICAgY29uc29sZS5sb2coYXJyYXlPZlByb2plY3RzKTtcbiAgICB9XG5cbiAgICBjcmVhdGVJbmJveCgpO1xuICAgIFxuICAgIHVwZGF0ZVByb2plY3RzKCk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kYXknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZVRvZGF5c1Rhc2tzKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXBjb21pbmcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZVVwY29taW5nVGFza3MpO1xufSkoKVxuXG5mdW5jdGlvbiBjcmVhdGVJbmJveCgpIHtcbiAgICB1cGRhdGVDdXJyZW50UHJvamVjdCgnSW5ib3gnKTtcbiAgICBcbiAgICBsZXQgaW5ib3ggPSBuZXcgUHJvamVjdCgnSW5ib3gnKTtcbiAgICBpZihhcnJheU9mUHJvamVjdHMuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5uYW1lID09ICdJbmJveCcpLmxlbmd0aCA9PSAwKSBhcnJheU9mUHJvamVjdHMucHVzaChpbmJveCk7XG4gICAgXG4gICAgVG9kb0J1dHRvbihpbmJveCk7XG4gICAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoYXJyYXlPZlByb2plY3RzKSk7XG4gICAgKGFycmF5T2ZQcm9qZWN0cy5maWx0ZXIocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUgPT0gJ0luYm94JykubGVuZ3RoID4gMCkgPyBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChhcnJheU9mUHJvamVjdHNbMF0pIDogY3JlYXRlQWxsVGFza3NJblByb2plY3QoaW5ib3gpO1xuICAgIFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmJveCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhhcnJheU9mUHJvamVjdHMpO1xuICAgICAgICAoYXJyYXlPZlByb2plY3RzLmZpbHRlcihwcm9qZWN0ID0+IHByb2plY3QubmFtZSA9PSAnSW5ib3gnKS5sZW5ndGggPiAwKSA/IGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KGFycmF5T2ZQcm9qZWN0c1swXSkgOiBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChpbmJveCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3QobmFtZSkge1xuICAgIGxldCBuZXdQcm9qZWN0ID0gbmV3IFByb2plY3QobmFtZSk7XG4gICAgYXJyYXlPZlByb2plY3RzLnB1c2gobmV3UHJvamVjdCk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLnRleHRDb250ZW50ID0gJyc7XG5cbiAgICBUb2RvQnV0dG9uKG5ld1Byb2plY3QpO1xuXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoYXJyYXlPZlByb2plY3RzKSk7XG5cbiAgICBpZihuYW1lID09ICdJbmJveCcpIHJldHVybiBuZXdQcm9qZWN0O1xuICAgICAgICBcbiAgICB1cGRhdGVQcm9qZWN0cygpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVQcm9qZWN0cygpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMnKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIFxuICAgIGFycmF5T2ZQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RJbkFycmF5ID0+IHtcbiAgICAgICAgbGV0IGRlbGV0ZUJ1dHRvbkluZGV4ID0gMDtcblxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHByb2plY3QuY2xhc3NOYW1lID0gJ3Byb2plY3QnO1xuICAgICAgICAgICAgXG4gICAgICAgIHByb2plY3QudGV4dENvbnRlbnQgPSBwcm9qZWN0SW5BcnJheS5uYW1lO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGVsZXRlUHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBkZWxldGVQcm9qZWN0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RfX2J0bicpO1xuICAgICAgICBkZWxldGVQcm9qZWN0QnV0dG9uLnRleHRDb250ZW50ID0gJ3gnO1xuICAgICAgICBcbiAgICAgICAgZGVsZXRlUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYnV0dG9uJykudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3QocHJvamVjdEluQXJyYXkpO1xuICAgICAgICAgICAgZGVsZXRlQnV0dG9uSW5kZXggPSAxO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZihkZWxldGVCdXR0b25JbmRleCA9PSAwKSBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChwcm9qZWN0SW5BcnJheSk7XG4gICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIHByb2plY3QuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdEJ1dHRvbik7XG4gICAgICAgIGlmKHByb2plY3RJbkFycmF5Lm5hbWUgIT09ICdJbmJveCcpe1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJykuYXBwZW5kQ2hpbGQocHJvamVjdCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVG9kYXlzVGFza3MoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYnV0dG9uJykudGV4dENvbnRlbnQgPSAnJztcbiAgICBcbiAgICBsZXQgdG9kYXlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0b2RheUNvbnRhaW5lci5jbGFzc05hbWUgPSAndG9kYXknO1xuXG4gICAgdXBkYXRlQ3VycmVudFByb2plY3QoJ1RvZGF5Jyk7XG5cbiAgICBhcnJheU9mUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgZm9yIChsZXQgZiBpbiBwcm9qZWN0LmFycmF5T2ZUb2Rvcykge1xuICAgICAgICAgICAgaWYocHJvamVjdC5hcnJheU9mVG9kb3NbZl0pe1xuICAgICAgICAgICAgICAgIGlmKGlzVG9kYXkocGFyc2VJU08ocHJvamVjdC5hcnJheU9mVG9kb3NbZl0uZGF0ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KHByb2plY3QsIGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZGF5JykuYXBwZW5kQ2hpbGQodG9kYXlDb250YWluZXIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVcGNvbWluZ1Rhc2tzKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykudGV4dENvbnRlbnQgPSAnJztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJ1dHRvbicpLnRleHRDb250ZW50ID0gJyc7XG5cbiAgICBsZXQgdXBjb21pbmdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB1cGNvbWluZ0NvbnRhaW5lci5jbGFzc05hbWUgPSAndXBjb21pbmcnO1xuXG4gICAgdXBkYXRlQ3VycmVudFByb2plY3QoJ1VwY29taW5nJyk7XG5cbiAgICBhcnJheU9mUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgZm9yKGxldCBmIGluIHByb2plY3QuYXJyYXlPZlRvZG9zKSB7XG4gICAgICAgICAgICBpZihpc0FmdGVyKHBhcnNlSVNPKHByb2plY3QuYXJyYXlPZlRvZG9zW2ZdLmRhdGUpLCBuZXcgRGF0ZSgpKSl7XG4gICAgICAgICAgICAgICAgY3JlYXRlQWxsVGFza3NJblByb2plY3QocHJvamVjdCwgZiwgJ3VwY29taW5nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51cGNvbWluZycpLmFwcGVuZENoaWxkKHVwY29taW5nQ29udGFpbmVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQWxsVGFza3NJblByb2plY3QocHJvamVjdCwgaW5kZXhPZlRvZGF5VGFzaywgb3JpZ2luKSB7XG4gICAgaWYgKCFpbmRleE9mVG9kYXlUYXNrKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1idXR0b24nKS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB1cGRhdGVDdXJyZW50UHJvamVjdChwcm9qZWN0KTtcbiAgICB9XG5cbiAgICBmb3IobGV0IGYgaW4gcHJvamVjdC5hcnJheU9mVG9kb3MpIHtcbiAgICAgICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrRGl2LmNsYXNzTmFtZSA9ICd0YXNrJztcblxuICAgICAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0NoZWNrYm94LnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHRhc2tDaGVja2JveC5jbGFzc05hbWUgPSAndGFza19fY2hlY2tib3gnO1xuICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tDaGVja2JveCk7XG5cbiAgICAgICAgY29uc3QgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza05hbWUudGV4dENvbnRlbnQgPSBwcm9qZWN0LmFycmF5T2ZUb2Rvc1tmXS5uYW1lO1xuICAgICAgICB0YXNrTmFtZS5jbGFzc05hbWUgPSAndGFza19fbmFtZSc7XG4gICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza05hbWUpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tPcmlnaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza09yaWdpbi50ZXh0Q29udGVudCA9ICdQcm9qZWN0OiAnICsgcHJvamVjdC5uYW1lO1xuICAgICAgICB0YXNrT3JpZ2luLmNsYXNzTmFtZSA9ICd0YXNrX19vcmlnaW4nO1xuICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tPcmlnaW4pO1xuXG4gICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBwcm9qZWN0LmFycmF5T2ZUb2Rvc1tmXS50YXNrRGVzY3JpcHRpb247XG4gICAgICAgIHRhc2tEZXNjcmlwdGlvbi5jbGFzc05hbWUgPSAndGFza19fdGFza0Rlc2NyaXB0aW9uJztcbiAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGVzY3JpcHRpb24pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGF0ZSk7XG4gICAgICAgIHRhc2tEYXRlLmNsYXNzTmFtZSA9ICd0YXNrX19kYXRlJztcbiAgICAgICAgLy8gdGFza0RhdGUudGV4dENvbnRlbnQgPSBmb3JtYXQocGFyc2VJU08ocHJvamVjdC5hcnJheU9mVG9kb3NbZl0uZGF0ZSksICdkIE1NTSB5IChFRSknKTtcbiAgICAgICAgdGFza0RhdGUudGV4dENvbnRlbnQgPSBwcm9qZWN0LmFycmF5T2ZUb2Rvc1tmXS5kYXRlO1xuXG4gICAgICAgIHN3aXRjaCAocHJvamVjdC5hcnJheU9mVG9kb3NbZl0ucHJpb3JpdHkpIHtcbiAgICAgICAgICAgIGNhc2UgJzEnOlxuICAgICAgICAgICAgICAgIHRhc2tDaGVja2JveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcyJzpcbiAgICAgICAgICAgICAgICB0YXNrQ2hlY2tib3guc3R5bGUuYmFja2dyb3VuZCA9ICdvcmFuZ2UnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMyc6XG4gICAgICAgICAgICAgICAgdGFza0NoZWNrYm94LnN0eWxlLmJhY2tncm91bmQgPSAneWVsbG93JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzAnOlxuICAgICAgICAgICAgICAgIHRhc2tDaGVja2JveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3doaXRlJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0YXNrQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGVUYXNrKHByb2plY3QsIGYpO1xuICAgICAgICAgICAgaWYoIWluZGV4T2ZUb2RheVRhc2spIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChwcm9qZWN0KTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4T2ZUb2RheVRhc2sgJiYgb3JpZ2luID09ICd1cGNvbWluZycpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVVcGNvbWluZ1Rhc2tzKCk7XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlVG9kYXlzVGFza3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICBpZihpbmRleE9mVG9kYXlUYXNrKSB7XG4gICAgICAgICAgICBpZihpbmRleE9mVG9kYXlUYXNrID09IGYpIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZighaW5kZXhPZlRvZGF5VGFzaykgVG9kb0J1dHRvbihwcm9qZWN0KTtcbiAgICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShhcnJheU9mUHJvamVjdHMpKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFByb2plY3QocHJvamVjdCkge1xuICAgIChwcm9qZWN0Lm5hbWUpID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZScpLnRleHRDb250ZW50ID0gcHJvamVjdC5uYW1lIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZScpLnRleHRDb250ZW50ID0gcHJvamVjdDtcbn1cblxuZnVuY3Rpb24gaW5wdXRQcm9qZWN0TmFtZSgpIHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5wdXRQcm9qZWN0TmFtZSk7XG4gICAgXG4gICAgY29uc3QgcHJvamVjdHNEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMnKTtcblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY2xvc2VCdXR0b24uY2xhc3NMaXN0LmFkZCgncHJvamVjdHNfX2J0bicsICdwcm9qZWN0c19fYnRuLS1jbG9zZScpO1xuICAgIGNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gJ3gnO1xuXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHByb2plY3RzRGl2LnJlbW92ZUNoaWxkKGlucHV0Rm9yUHJvamVjdE5hbWUpO1xuICAgICAgICBwcm9qZWN0c0Rpdi5yZW1vdmVDaGlsZChzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZSk7XG4gICAgICAgIHByb2plY3RzRGl2LnJlbW92ZUNoaWxkKGNsb3NlQnV0dG9uKTtcblxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5wdXRQcm9qZWN0TmFtZSk7XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgaW5wdXRGb3JQcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXRGb3JQcm9qZWN0TmFtZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgIGlucHV0Rm9yUHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvamVjdHNfX25hbWUtaW5wdXQnKTtcbiAgICBcbiAgICBwcm9qZWN0c0Rpdi5hcHBlbmRDaGlsZChpbnB1dEZvclByb2plY3ROYW1lKTtcbiAgICBcbiAgICBjb25zdCBzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RzX19idG4nLCAncHJvamVjdHNfX2J0bi0tc3VibWl0Jyk7XG4gICAgcHJvamVjdHNEaXYuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIHN1Ym1pdEJ1dHRvbkZvclByb2plY3ROYW1lLnRleHRDb250ZW50ID0gJ09rJztcblxuICAgIHByb2plY3RzRGl2LmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbkZvclByb2plY3ROYW1lKTtcblxuICAgIHN1Ym1pdEJ1dHRvbkZvclByb2plY3ROYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgbmFtZSA9IGlucHV0Rm9yUHJvamVjdE5hbWUudmFsdWU7XG4gICAgICAgIFxuICAgICAgICBpZihuYW1lICYmIG5hbWUubGVuZ3RoIDwgMTYgJiYgIWNoZWNrSWRlbnRpY2FsUHJvamVjdChuYW1lKSkge1xuICAgICAgICAgICAgcHJvamVjdHNEaXYucmVtb3ZlQ2hpbGQoaW5wdXRGb3JQcm9qZWN0TmFtZSk7XG4gICAgICAgICAgICBwcm9qZWN0c0Rpdi5yZW1vdmVDaGlsZChzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZSk7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYnV0dG9uJykudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LW5hbWUnKS50ZXh0Q29udGVudCA9IG5hbWU7XG5cbiAgICAgICAgICAgIGNyZWF0ZVByb2plY3QobmFtZSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnB1dFByb2plY3ROYW1lKTtcbiAgICAgICAgfWVsc2UgaWYoY2hlY2tJZGVudGljYWxQcm9qZWN0KG5hbWUpID09IHRydWUpIHtcbiAgICAgICAgICAgIGFsZXJ0KCdQcm9qZWN0IG5hbWVzIHNob3VsZCBiZSBkaWZmZXJlbnQnKTtcbiAgICAgICAgICAgIGlucHV0Rm9yUHJvamVjdE5hbWUudmFsdWUgPSAnJztcbiAgICAgICAgfWVsc2UgaWYobmFtZS5sZW5ndGggPj0gMTYpIHtcbiAgICAgICAgICAgIGFsZXJ0KCdQcm9qZWN0IG5hbWUgc2hvdWxkIGJlIGxlc3MgdGhhbiAxNiBjaGFyYWN0ZXJzJyk7XG4gICAgICAgIH1lbHNlIGlmKCFuYW1lKSB7XG4gICAgICAgICAgICBhbGVydCgnRW50ZXIgcHJvamVjdCBuYW1lJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY2hlY2tJZGVudGljYWxQcm9qZWN0KG5hbWUpIHtcbiAgICBpZihhcnJheU9mUHJvamVjdHMuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5uYW1lID09IG5hbWUpLmxlbmd0aCA+IDApIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlVGFzayhuZXdQcm9qZWN0LCBudW1iZXJPZlRhc2spIHtcbiAgICBuZXdQcm9qZWN0LmFycmF5T2ZUb2Rvcy5zcGxpY2UobnVtYmVyT2ZUYXNrLCAxKTsgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoYXJyYXlPZlByb2plY3RzKSk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVByb2plY3QobmV3UHJvamVjdCkge1xuICAgIGFycmF5T2ZQcm9qZWN0cyA9IGFycmF5T2ZQcm9qZWN0cy5maWx0ZXIocHJvamVjdCA9PiBwcm9qZWN0ICE9PSBuZXdQcm9qZWN0KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShhcnJheU9mUHJvamVjdHMpKTtcbiAgICBcbiAgICB1cGRhdGVQcm9qZWN0cygpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS50ZXh0Q29udGVudCA9ICcnO1xufVxuXG5leHBvcnQge2lucHV0UHJvamVjdE5hbWUsIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0LCBhcnJheU9mUHJvamVjdHN9IiwiaW1wb3J0IHsgcGFyc2VJU08gfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCB7IFRvZG8gfSBmcm9tIFwiLi90b2Rvc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWxsVGFza3NJblByb2plY3QsIGFycmF5T2ZQcm9qZWN0cyB9IGZyb20gXCIuL3VwZGF0ZVByb2plY3RzRE9NXCI7XG5cbmZ1bmN0aW9uIFRvZG9CdXR0b24obmV3UHJvamVjdCkge1xuICAgIGxldCB0b2RvQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICBcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJ1dHRvbicpLmFwcGVuZENoaWxkKHRvZG9CdXR0b24pO1xuICAgIHRvZG9CdXR0b24udGV4dENvbnRlbnQgPSAnQ3JlYXRlIHRvZG8nO1xuICAgIHRvZG9CdXR0b24uY2xhc3NOYW1lID0gJ2NyZWF0ZS1idXR0b25fX2J0bic7XG5cbiAgICB0b2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjcmVhdGVQb3B1cChuZXdQcm9qZWN0KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUG9wdXAobmV3UHJvamVjdCkge1xuICAgIGxldCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jb250YWluZXInKTtcbiAgICBwb3B1cC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMSknO1xuICAgIFxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHBvcHVwKSB7XG4gICAgICAgICAgICBwb3B1cC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMCknO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXREYXRhRnJvbUZvcm0sIGZhbHNlKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIikucGFyYW1ldGVyID0gbmV3UHJvamVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YUZyb21Gb3JtKGUpIHtcbiAgICBsZXQgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrbmFtZScpLnZhbHVlO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgIGxldCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS52YWx1ZTtcbiAgICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZTtcblxuICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGxldCB0YXNrID0gVG9kbyhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJhbWV0ZXIuYXJyYXlPZlRvZG9zLnB1c2godGFzayk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xuXG4gICAgICAgIGxldCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jb250YWluZXInKTtcbiAgICAgICAgcG9wdXAuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDApJztcblxuICAgICAgICBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChlLmN1cnJlbnRUYXJnZXQucGFyYW1ldGVyKTtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdFbnRlciB0YXNrIG5hbWUnKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IHsgVG9kb0J1dHRvbiB9IiwiZnVuY3Rpb24gVG9kbyhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpe1xuICAgIHJldHVybntcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICBwcmlvcml0eTogcHJpb3JpdHksXG4gICAgfVxufVxuXG5leHBvcnQge1RvZG99OyIsImltcG9ydCB7IGNyZWF0ZVRvZG8gfSBmcm9tIFwiLi91cGRhdGVUb2Rvc0RPTVwiO1xuaW1wb3J0IHsgaW5wdXRQcm9qZWN0TmFtZSB9IGZyb20gXCIuL3VwZGF0ZVByb2plY3RzRE9NXCI7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0c19fYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnB1dFByb2plY3ROYW1lKTsiXSwibmFtZXMiOlsiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRoaXMiLCJhcnJheU9mVG9kb3MiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ3VtZW50cyIsImFyZ1N0ciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIiwic3RhcnRPZkRheSIsImRpcnR5RGF0ZSIsImRhdGUiLCJzZXRIb3VycyIsImlzU2FtZURheSIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJpc1RvZGF5Iiwibm93IiwiTWF0aCIsInBvdyIsIm1pbGxpc2Vjb25kc0luSG91ciIsInRvSW50ZWdlciIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJjZWlsIiwiZmxvb3IiLCJwYXJzZUlTTyIsImRpcnR5T3B0aW9ucyIsIm9wdGlvbnMiLCJhZGRpdGlvbmFsRGlnaXRzIiwiUmFuZ2VFcnJvciIsImRhdGVTdHJpbmdzIiwic3BsaXREYXRlU3RyaW5nIiwicGFyc2VZZWFyUmVzdWx0IiwicGFyc2VZZWFyIiwicGFyc2VEYXRlIiwicmVzdERhdGVTdHJpbmciLCJ5ZWFyIiwib2Zmc2V0IiwidGltZXN0YW1wIiwidGltZSIsInBhcnNlVGltZSIsInRpbWV6b25lIiwicmVzdWx0Iiwic2V0RnVsbFllYXIiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwiZ2V0VVRDRGF0ZSIsImdldFVUQ0hvdXJzIiwiZ2V0VVRDTWludXRlcyIsImdldFVUQ1NlY29uZHMiLCJnZXRVVENNaWxsaXNlY29uZHMiLCJwYXJzZVRpbWV6b25lIiwicGF0dGVybnMiLCJkYXRlVGltZURlbGltaXRlciIsInRpbWVab25lRGVsaW1pdGVyIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4IiwidGltZXpvbmVSZWdleCIsImRhdGVTdHJpbmciLCJ0aW1lU3RyaW5nIiwiYXJyYXkiLCJzcGxpdCIsInRlc3QiLCJzdWJzdHIiLCJ0b2tlbiIsImV4ZWMiLCJyZXBsYWNlIiwicmVnZXgiLCJSZWdFeHAiLCJjYXB0dXJlcyIsIm1hdGNoIiwicGFyc2VJbnQiLCJjZW50dXJ5Iiwic2xpY2UiLCJpc1dlZWtEYXRlIiwiZGF5T2ZZZWFyIiwicGFyc2VEYXRlVW5pdCIsIm1vbnRoIiwiZGF5Iiwid2VlayIsImRheU9mV2VlayIsIl95ZWFyIiwidmFsaWRhdGVXZWVrRGF0ZSIsImlzb1dlZWtZZWFyIiwic2V0VVRDRnVsbFllYXIiLCJkaWZmIiwiZ2V0VVRDRGF5Iiwic2V0VVRDRGF0ZSIsImRheU9mSVNPV2Vla1llYXIiLCJkYXlzSW5Nb250aHMiLCJpc0xlYXBZZWFySW5kZXgiLCJ2YWxpZGF0ZURhdGUiLCJ2YWxpZGF0ZURheU9mWWVhckRhdGUiLCJtYXgiLCJ2YWx1ZSIsImhvdXJzIiwicGFyc2VUaW1lVW5pdCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsaWRhdGVUaW1lIiwicGFyc2VGbG9hdCIsInRpbWV6b25lU3RyaW5nIiwic2lnbiIsIl9ob3VycyIsInZhbGlkYXRlVGltZXpvbmUiLCJpc0FmdGVyIiwiZGlydHlEYXRlVG9Db21wYXJlIiwiZGF0ZVRvQ29tcGFyZSIsImFycmF5T2ZQcm9qZWN0cyIsInVwZGF0ZVByb2plY3RzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwicHJvamVjdEluQXJyYXkiLCJkZWxldGVCdXR0b25JbmRleCIsInByb2plY3QiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiZGVsZXRlUHJvamVjdEJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJuZXdQcm9qZWN0IiwiZmlsdGVyIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVhdGVBbGxUYXNrc0luUHJvamVjdCIsImFwcGVuZENoaWxkIiwiY3JlYXRlVG9kYXlzVGFza3MiLCJ0b2RheUNvbnRhaW5lciIsInVwZGF0ZUN1cnJlbnRQcm9qZWN0IiwiZiIsImNyZWF0ZVVwY29taW5nVGFza3MiLCJ1cGNvbWluZ0NvbnRhaW5lciIsImluZGV4T2ZUb2RheVRhc2siLCJvcmlnaW4iLCJ0YXNrRGl2IiwidGFza0NoZWNrYm94IiwidGFza05hbWUiLCJ0YXNrT3JpZ2luIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza0RhdGUiLCJwcmlvcml0eSIsInN0eWxlIiwiYmFja2dyb3VuZCIsIm51bWJlck9mVGFzayIsInNwbGljZSIsIlRvZG9CdXR0b24iLCJjaGVja0lkZW50aWNhbFByb2plY3QiLCJ0b2RvQnV0dG9uIiwicG9wdXAiLCJ0cmFuc2Zvcm0iLCJib2R5IiwiZXZlbnQiLCJ0YXJnZXQiLCJnZXREYXRhRnJvbUZvcm0iLCJwYXJhbWV0ZXIiLCJjcmVhdGVQb3B1cCIsImUiLCJnZXRFbGVtZW50QnlJZCIsImRlc2NyaXB0aW9uIiwidGFzayIsIlRvZG8iLCJjdXJyZW50VGFyZ2V0IiwicHVzaCIsImFsZXJ0IiwicGFyc2UiLCJnZXRJdGVtIiwibG9nIiwiaW5ib3giLCJjcmVhdGVJbmJveCIsImlucHV0UHJvamVjdE5hbWUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJvamVjdHNEaXYiLCJjbG9zZUJ1dHRvbiIsInJlbW92ZUNoaWxkIiwiaW5wdXRGb3JQcm9qZWN0TmFtZSIsInN1Ym1pdEJ1dHRvbkZvclByb2plY3ROYW1lIiwic2V0QXR0cmlidXRlIiwiY3JlYXRlUHJvamVjdCJdLCJzb3VyY2VSb290IjoiIn0=