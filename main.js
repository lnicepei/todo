(()=>{"use strict";class e{constructor(e){this.name=e,this.arrayOfTodos=[]}}let t=[];function n(n){let r=new e(n);t.push(r),document.querySelector(".content").textContent="";let c=s(r);if(r.arrayOfTodos.push(c),localStorage.setItem("projects",JSON.stringify(t)),"Inbox"==n)return r;o()}function o(){document.querySelector(".projects").textContent="";for(let e=1;e<t.length;e++)if("Inbox"!==t[e].name){let n=document.createElement("div");n.className="project",document.querySelector(".projects").appendChild(n),n.textContent=t[e].name;let o=document.createElement("button");o.classList.add("project__btn"),o.textContent="x",o.addEventListener("click",(()=>{u(t[e])})),n.addEventListener("click",(()=>{a(t[e])})),n.appendChild(o)}}function r(){document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="";let e=document.createElement("div");e.className="today";let n=function(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return e=o+"-"+n+"-"+t,e}();d("Today");for(let e in t)t[e].arrayOfTodos.forEach((o=>{o&&o.date==n&&a(t[e],1)}));document.querySelector(".today").appendChild(e)}function c(){document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="";let e=document.createElement("div");e.className="upcoming";let n=new Date,o=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),c=n.getFullYear();n=c+"/"+r+"/"+o,d("Upcoming");for(let e in t)for(let n=1;n<t[e].arrayOfTodos.length;n++)t[e].arrayOfTodos[n].date.substr(0,4)>c&&a(t[e],n,"upcoming"),t[e].arrayOfTodos[n].date.substr(0,4)==c&&t[e].arrayOfTodos[n].date.substr(5,2)>r&&a(t[e],n,"upcoming"),t[e].arrayOfTodos[n].date.substr(0,4)==c&&t[e].arrayOfTodos[n].date.substr(5,2)==r&&t[e].arrayOfTodos[n].date.substr(8,2)>o&&a(t[e],n,"upcoming");document.querySelector(".upcoming").appendChild(e)}function a(e,n,o){n||(document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="",d(e));for(let d=1;d<=e.arrayOfTodos.length-1;d++){let l=document.createElement("div");l.className="task";let u=document.createElement("div");u.textContent="",u.className="checkbox",l.appendChild(u);let s=document.createElement("div");s.textContent=e.arrayOfTodos[d].name,s.className="taskname",l.appendChild(s);let i=document.createElement("div");i.textContent="Project: "+e.name,i.className="father-project",l.appendChild(i);let m=document.createElement("div");m.textContent=e.arrayOfTodos[d].description,m.className="description",l.appendChild(m),1==e.arrayOfTodos[d].priority&&(u.style.background="red"),2==e.arrayOfTodos[d].priority&&(u.style.background="orange"),3==e.arrayOfTodos[d].priority&&(u.style.background="yellow"),0==e.arrayOfTodos[d].priority&&(u.style.background="white"),u.addEventListener("click",(()=>{var l;l=d,e.arrayOfTodos.splice(l,1),localStorage.setItem("projects",JSON.stringify(t)),n?n&&"upcoming"==o?c():r():a(e)}));let p=document.createElement("div");l.appendChild(p),p.className="date",p.textContent=e.arrayOfTodos[d].date,n?n==d&&document.querySelector(".content").appendChild(l):document.querySelector(".content").appendChild(l)}n||s(e),localStorage.setItem("projects",JSON.stringify(t))}function d(e){e.name?document.querySelector(".project-name").textContent=e.name:document.querySelector(".project-name").textContent=e}function l(e){for(let n=0;n<t.length;n++)if(t[n].name==e)return!1;return!0}function u(e){for(let n=0;n<t.length;n++)t[n]==e&&t.splice(n,1);localStorage.setItem("projects",JSON.stringify(t)),document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="",document.querySelector(".project-name").textContent="",o()}function s(e){let t=document.createElement("button");document.querySelector(".create-button").appendChild(t),t.textContent="Create todo",t.className="create-button__btn",t.addEventListener("click",(()=>{!function(e){let t=document.querySelector(".popup-container");t.style.transform="scale(1)",document.body.addEventListener("click",(function(e){e.target==t&&(t.style.transform="scale(0)")})),document.querySelector(".submit-button").addEventListener("click",i,!1),document.querySelector(".submit-button").parameter=e}(e)}))}function i(e){let n=document.getElementById("taskname").value,o=document.getElementById("description").value,r=document.getElementById("date").value,c=document.getElementById("priority").value;if(n){let d=function(e,t,n,o){return{name:e,description:t,date:n,priority:o}}(n,o,r,c);e.currentTarget.parameter.arrayOfTodos.push(d),localStorage.setItem("projects",JSON.stringify(t)),document.querySelector(".popup-container").style.transform="scale(0)",a(e.currentTarget.parameter)}else alert("Enter task name")}"projects"in localStorage&&o(),function(){if(d("Inbox"),l()){let e=n("Inbox");document.querySelector(".inbox").addEventListener("click",(()=>{a(e)}))}}(),document.querySelector(".today").addEventListener("click",r),document.querySelector(".upcoming").addEventListener("click",c),document.querySelector(".projects__btn").addEventListener("click",(function e(){this.removeEventListener("click",e);var t=document.querySelector(".projects");let o=document.createElement("button");o.classList.add("projects__btn","projects__btn--close"),o.textContent="x",o.addEventListener("click",(()=>{t.removeChild(r),t.removeChild(c),t.removeChild(o),this.addEventListener("click",e)}));var r=document.createElement("input");r.setAttribute("type","text"),r.classList.add("projects__name-input"),t.appendChild(r);var c=document.createElement("button");o.classList.add("projects__btn","projects__btn--submit"),t.appendChild(o),t.appendChild(c),c.textContent="Ok",c.addEventListener("click",(()=>{let o=r.value;o&&o.length<16&&l(o)?(t.removeChild(r),t.removeChild(c),document.querySelector(".create-button").textContent="",document.querySelector(".project-name").textContent=o,n(o),this.addEventListener("click",e)):0==l(o)?(alert("Project names should be different"),r.value=""):o.length>=16?alert("Project name should be less than 16 characters"):o||alert("Enter project name")}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUlDLEVBQTZCaEYsU0FBU2EsY0FBYyxVQUN4RGdFLEVBQVk1RCxVQUFVQyxJQUFJLGdCQUFpQix5QkFFM0MwRCxFQUFZN0QsWUFBWThELEdBQ3hCRCxFQUFZN0QsWUFBWWlFLEdBQ3hCQSxFQUEyQjlFLFlBQWMsS0FHekM4RSxFQUEyQjdELGlCQUFpQixTQUFTLEtBQ2pELElBQUkxQixFQUFPc0YsRUFBb0JaLE1BRTVCMUUsR0FBUUEsRUFBS2tCLE9BQVMsSUFBTTRDLEVBQXNCOUQsSUFDakRtRixFQUFZRSxZQUFZQyxHQUN4QkgsRUFBWUUsWUFBWUUsR0FDeEJoRixTQUFTQyxjQUFjLGtCQUFrQkMsWUFBYyxHQUN2REYsU0FBU0MsY0FBYyxpQkFBaUJDLFlBQWNULEVBQ3RESSxFQUFjSixHQUNkQyxLQUFLeUIsaUJBQWlCLFFBQVN1RCxJQUNLLEdBQS9CbkIsRUFBc0I5RCxJQUMzQjhFLE1BQU0scUNBQ05RLEVBQW9CWixNQUFRLElBQ3ZCMUUsRUFBS2tCLFFBQVUsR0FDcEI0RCxNQUFNLGtEQUNBOUUsR0FDTjhFLE1BQU0sNkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYWNrYWdlLy4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9zcmMvdXBkYXRlUHJvamVjdHNET00uanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL3NyYy91cGRhdGVUb2Rvc0RPTS5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vc3JjL3RvZG9zLmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgUHJvamVjdHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKXtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5hcnJheU9mVG9kb3MgPSBbXTtcbiAgICB9XG4gICAgXG4gICAgLy9mdW5jdGlvbnMgdG8gYWx0ZXIgdGFza3MgaW5zaWRlIGEgcHJvamVjdFxufVxuXG5leHBvcnQge1Byb2plY3R9OyIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHsgVG9kb0J1dHRvbiB9IGZyb20gXCIuL3VwZGF0ZVRvZG9zRE9NXCI7XG5cbmxldCBhcnJheU9mUHJvamVjdHMgPSBbXTtcblxuKGZ1bmN0aW9uIGNoZWNrUHJvamVjdHNPblJlbG9hZCgpIHtcbiAgICBpZigncHJvamVjdHMnIGluIGxvY2FsU3RvcmFnZSl7XG4gICAgICAgIC8vIGFycmF5T2ZQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3RzJykgfHwgW10pO1xuICAgICAgICB1cGRhdGVQcm9qZWN0cygpO1xuICAgIH1cbiAgICBjcmVhdGVJbmJveCgpO1xuICAgIFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RheScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVG9kYXlzVGFza3MpO1xuICAgIFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51cGNvbWluZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVXBjb21pbmdUYXNrcyk7XG59KSgpO1xuXG5mdW5jdGlvbiBjcmVhdGVJbmJveCgpIHtcbiAgICAvLyBsZXQgaW5ib3ggPSBuZXcgUHJvamVjdCgnSW5ib3gnKTtcbiAgICBcbiAgICAvLyAvLyBpZiAoIWNoZWNrSWRlbnRpY2FsUHJvamVjdChpbmJveCkpIHtcbiAgICAgICAgXG4gICAgICAgIC8vICAgICBpZihjaGVja0lkZW50aWNhbFByb2plY3QoaW5ib3gpICYmICdwcm9qZWN0cycgaW4gbG9jYWxTdG9yYWdlKSBhcnJheU9mUHJvamVjdHMucHVzaChpbmJveCk7XG4gICAgICAgIFxuICAgICAgICAvLyAgICAgbGV0IHRhc2tJbnNpZGVJbmJveCA9IFRvZG9CdXR0b24oaW5ib3gpO1xuICAgICAgICAvLyAgICAgaW5ib3guYXJyYXlPZlRvZG9zLnB1c2godGFza0luc2lkZUluYm94KTtcbiAgICAgICAgICAgIFxuICAgICAgICAvLyAgICAgY3JlYXRlQWxsVGFza3NJblByb2plY3QoaW5ib3gpO1xuICAgICAgICAvLyAvLyB9XG4gICAgdXBkYXRlQ3VycmVudFByb2plY3QoJ0luYm94Jyk7IC8vIFVwZGF0ZXMgY3VycmVudCB3b3JraW5nIHByb2plY3QgXG4gICAgXG4gICAgaWYgKGNoZWNrSWRlbnRpY2FsUHJvamVjdCgpKSB7XG4gICAgICAgIGxldCBpbmJveCA9IGNyZWF0ZVByb2plY3QoJ0luYm94Jyk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmJveCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY3JlYXRlQWxsVGFza3NJblByb2plY3QoaW5ib3gpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0KG5hbWUpIHtcbiAgICBsZXQgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KG5hbWUpO1xuICAgIGFycmF5T2ZQcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpO1xuICAgIFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykudGV4dENvbnRlbnQgPSAnJztcbiAgICBcbiAgICBsZXQgdGFza0luc2lkZVByb2plY3QgPSBUb2RvQnV0dG9uKG5ld1Byb2plY3QpO1xuICAgIG5ld1Byb2plY3QuYXJyYXlPZlRvZG9zLnB1c2godGFza0luc2lkZVByb2plY3QpO1xuICAgIFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xuXG4gICAgaWYobmFtZSA9PSAnSW5ib3gnKSByZXR1cm4gbmV3UHJvamVjdDtcbiAgICAgICAgXG4gICAgdXBkYXRlUHJvamVjdHMoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUHJvamVjdHMoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJykudGV4dENvbnRlbnQgPSAnJztcbiAgICBmb3IobGV0IGkgPSAxOyBpIDwgYXJyYXlPZlByb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmKGFycmF5T2ZQcm9qZWN0c1tpXS5uYW1lICE9PSAnSW5ib3gnKXtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBwcm9qZWN0LmNsYXNzTmFtZSA9ICdwcm9qZWN0JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJykuYXBwZW5kQ2hpbGQocHJvamVjdCk7XG4gICAgICAgICAgICBwcm9qZWN0LnRleHRDb250ZW50ID0gYXJyYXlPZlByb2plY3RzW2ldLm5hbWU7XG4gICAgXG4gICAgICAgICAgICBsZXQgZGVsZXRlUHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgZGVsZXRlUHJvamVjdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0X19idG4nKTtcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdXR0b24udGV4dENvbnRlbnQgPSAneCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlUHJvamVjdChhcnJheU9mUHJvamVjdHNbaV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KGFycmF5T2ZQcm9qZWN0c1tpXSk7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHByb2plY3QuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvamVjdEJ1dHRvbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldERhdGUoKSB7XG4gICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICBsZXQgZGQgPSBTdHJpbmcodG9kYXkuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGxldCBtbSA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsgLy9KYW51YXJ5IGlzIDAhXG4gICAgbGV0IHl5eXkgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuXG4gICAgdG9kYXkgPSB5eXl5ICsgJy0nICsgbW0gKyAnLScgKyBkZDtcblxuICAgIHJldHVybiB0b2RheTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVG9kYXlzVGFza3MoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYnV0dG9uJykudGV4dENvbnRlbnQgPSAnJztcbiAgICBsZXQgdG9kYXlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0b2RheUNvbnRhaW5lci5jbGFzc05hbWUgPSAndG9kYXknO1xuXG4gICAgbGV0IHRvZGF5ID0gZ2V0RGF0ZSgpO1xuXG4gICAgdXBkYXRlQ3VycmVudFByb2plY3QoJ1RvZGF5Jyk7XG4gICBcbiAgICBmb3IobGV0IGkgaW4gYXJyYXlPZlByb2plY3RzKSB7XG4gICAgICAgIC8vIGZvcihsZXQgZiA9IDE7IGYgPCBhcnJheU9mUHJvamVjdHNbaV0uYXJyYXlPZlRvZG9zLmxlbmd0aDsgZisrKSB7XG4gICAgICAgIC8vICAgICBpZihhcnJheU9mUHJvamVjdHNbaV0uYXJyYXlPZlRvZG9zW2ZdLmRhdGUgPT0gdG9kYXkpIHtcbiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygxKTtcbiAgICAgICAgLy8gICAgICAgICBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChhcnJheU9mUHJvamVjdHNbaV0sIGYpO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9XG4gICAgICAgIGFycmF5T2ZQcm9qZWN0c1tpXS5hcnJheU9mVG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgICAgIGlmKHRvZG8pe1xuICAgICAgICAgICAgICAgIGlmKHRvZG8uZGF0ZSA9PSB0b2RheSkgY3JlYXRlQWxsVGFza3NJblByb2plY3QoYXJyYXlPZlByb2plY3RzW2ldLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBsZXQgY291bnRQcm9qZWN0cyA9IDE7XG5cbiAgICAvLyBhcnJheU9mUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAvLyAgICAgY29uc3QgdG9kYXlBcnJheSA9IHByb2plY3QuYXJyYXlPZlRvZG9zLmZpbHRlcihmdW5jdGlvbih0YXNrKXtcbiAgICAvLyAgICAgICAgIGlmKHRhc2spe1xuICAgIC8vICAgICAgICAgICAgIGlmKHRhc2suZGF0ZSA9PSB0b2RheSkgY3JlYXRlQWxsVGFza3NJblByb2plY3QoYXJyYXlPZlByb2plY3RzW2NvdW50UHJvamVjdHNdKTtcbiAgICAvLyAgICAgICAgICAgICBjb3VudFByb2plY3RzKys7XG4gICAgLy8gICAgICAgICB9IFxuICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2codGFzay5kYXRlKTtcbiAgICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhc2suZGF0ZSk7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vICAgICBjb25zb2xlLmxvZyh0b2RheUFycmF5KTtcbiAgICAvLyB9KTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RheScpLmFwcGVuZENoaWxkKHRvZGF5Q29udGFpbmVyKTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZVVwY29taW5nVGFza3MoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYnV0dG9uJykudGV4dENvbnRlbnQgPSAnJztcbiAgICBsZXQgdXBjb21pbmdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB1cGNvbWluZ0NvbnRhaW5lci5jbGFzc05hbWUgPSAndXBjb21pbmcnO1xuXG4gICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcblxuICAgIGxldCBkZCA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgbGV0IG1tID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOyAvL0phbnVhcnkgaXMgMCFcbiAgICBsZXQgeXl5eSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG5cbiAgICB0b2RheSA9IHl5eXkgKyAnLycgKyBtbSArICcvJyArIGRkOyAgIFxuXG4gICAgdXBkYXRlQ3VycmVudFByb2plY3QoJ1VwY29taW5nJyk7XG5cbiAgICBmb3IobGV0IGkgaW4gYXJyYXlPZlByb2plY3RzKSB7XG4gICAgICAgIGZvcihsZXQgZiA9IDE7IGYgPCBhcnJheU9mUHJvamVjdHNbaV0uYXJyYXlPZlRvZG9zLmxlbmd0aDsgZisrKSB7XG4gICAgICAgICAgICBpZihhcnJheU9mUHJvamVjdHNbaV0uYXJyYXlPZlRvZG9zW2ZdLmRhdGUuc3Vic3RyKDAsIDQpID4geXl5eSkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KGFycmF5T2ZQcm9qZWN0c1tpXSwgZiwgJ3VwY29taW5nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihhcnJheU9mUHJvamVjdHNbaV0uYXJyYXlPZlRvZG9zW2ZdLmRhdGUuc3Vic3RyKDAsIDQpID09IHl5eXkgJiZcbiAgICAgICAgICAgICAgIGFycmF5T2ZQcm9qZWN0c1tpXS5hcnJheU9mVG9kb3NbZl0uZGF0ZS5zdWJzdHIoNSwgMikgPiBtbSkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KGFycmF5T2ZQcm9qZWN0c1tpXSwgZiwgJ3VwY29taW5nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihhcnJheU9mUHJvamVjdHNbaV0uYXJyYXlPZlRvZG9zW2ZdLmRhdGUuc3Vic3RyKDAsIDQpID09IHl5eXkgJiZcbiAgICAgICAgICAgICAgIGFycmF5T2ZQcm9qZWN0c1tpXS5hcnJheU9mVG9kb3NbZl0uZGF0ZS5zdWJzdHIoNSwgMikgPT0gbW0gJiZcbiAgICAgICAgICAgICAgIGFycmF5T2ZQcm9qZWN0c1tpXS5hcnJheU9mVG9kb3NbZl0uZGF0ZS5zdWJzdHIoOCwgMikgPiBkZCkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KGFycmF5T2ZQcm9qZWN0c1tpXSwgZiwgJ3VwY29taW5nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXBjb21pbmcnKS5hcHBlbmRDaGlsZCh1cGNvbWluZ0NvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KHByb2plY3QsIGluZGV4T2ZUb2RheVRhc2ssIG9yaWdpbikge1xuICAgIGlmICghaW5kZXhPZlRvZGF5VGFzayl7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1idXR0b24nKS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB1cGRhdGVDdXJyZW50UHJvamVjdChwcm9qZWN0KTtcbiAgICB9IFxuICAgIFxuICAgIGZvcihsZXQgZiA9IDE7IGYgPD0gcHJvamVjdC5hcnJheU9mVG9kb3MubGVuZ3RoIC0gMTsgZisrKSB7XG4gICAgICAgIGxldCB0YXNrT25UaGVTY3JlZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza09uVGhlU2NyZWVuLmNsYXNzTmFtZSA9ICd0YXNrJztcbiAgICAgICAgXG4gICAgICAgIGxldCBjaGVja0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjaGVja0JveC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICBjaGVja0JveC5jbGFzc05hbWUgPSAnY2hlY2tib3gnO1xuICAgICAgICB0YXNrT25UaGVTY3JlZW4uYXBwZW5kQ2hpbGQoY2hlY2tCb3gpO1xuXG4gICAgICAgIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrTmFtZS50ZXh0Q29udGVudCA9IHByb2plY3QuYXJyYXlPZlRvZG9zW2ZdLm5hbWU7XG4gICAgICAgIHRhc2tOYW1lLmNsYXNzTmFtZSA9ICd0YXNrbmFtZSc7XG4gICAgICAgIHRhc2tPblRoZVNjcmVlbi5hcHBlbmRDaGlsZCh0YXNrTmFtZSk7XG5cbiAgICAgICAgbGV0IHByb2plY3RGYXRoZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcHJvamVjdEZhdGhlci50ZXh0Q29udGVudCA9ICdQcm9qZWN0OiAnICsgcHJvamVjdC5uYW1lO1xuICAgICAgICBwcm9qZWN0RmF0aGVyLmNsYXNzTmFtZSA9ICdmYXRoZXItcHJvamVjdCc7XG4gICAgICAgIHRhc2tPblRoZVNjcmVlbi5hcHBlbmRDaGlsZChwcm9qZWN0RmF0aGVyKTtcblxuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBwcm9qZWN0LmFycmF5T2ZUb2Rvc1tmXS5kZXNjcmlwdGlvbjtcbiAgICAgICAgZGVzY3JpcHRpb24uY2xhc3NOYW1lID0gJ2Rlc2NyaXB0aW9uJztcbiAgICAgICAgdGFza09uVGhlU2NyZWVuLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgICAgICBpZihwcm9qZWN0LmFycmF5T2ZUb2Rvc1tmXS5wcmlvcml0eSA9PSAxKSBjaGVja0JveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XG4gICAgICAgIGlmKHByb2plY3QuYXJyYXlPZlRvZG9zW2ZdLnByaW9yaXR5ID09IDIpIGNoZWNrQm94LnN0eWxlLmJhY2tncm91bmQgPSAnb3JhbmdlJztcbiAgICAgICAgaWYocHJvamVjdC5hcnJheU9mVG9kb3NbZl0ucHJpb3JpdHkgPT0gMykgY2hlY2tCb3guc3R5bGUuYmFja2dyb3VuZCA9ICd5ZWxsb3cnO1xuICAgICAgICBpZihwcm9qZWN0LmFycmF5T2ZUb2Rvc1tmXS5wcmlvcml0eSA9PSAwKSBjaGVja0JveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3doaXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBjaGVja0JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIC8vIGlmICghaW5kZXhPZlRvZGF5VGFzaykgZGVsZXRlVGFzayhwcm9qZWN0LCBmKTtcbiAgICAgICAgICAgIGRlbGV0ZVRhc2socHJvamVjdCwgZik7XG4gICAgICAgICAgICAvLyBpZiAoaW5kZXhPZlRvZGF5VGFzaykgZGVsZXRlVGFzayhwcm9qZWN0LCBmLCBpbmRleE9mVG9kYXlUYXNrKTtcbiAgICAgICAgICAgIGlmKCFpbmRleE9mVG9kYXlUYXNrKXtcbiAgICAgICAgICAgICAgICBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChwcm9qZWN0KTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4T2ZUb2RheVRhc2sgJiYgb3JpZ2luID09ICd1cGNvbWluZycpe1xuICAgICAgICAgICAgICAgIGNyZWF0ZVVwY29taW5nVGFza3MoKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNyZWF0ZVRvZGF5c1Rhc2tzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAoIWluZGV4T2ZUb2RheVRhc2spID8gY3JlYXRlQWxsVGFza3NJblByb2plY3QocHJvamVjdCkgOiBjcmVhdGVUb2RheXNUYXNrcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgZGF0ZVBpY2tlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrT25UaGVTY3JlZW4uYXBwZW5kQ2hpbGQoZGF0ZVBpY2tlcik7XG4gICAgICAgIGRhdGVQaWNrZXIuY2xhc3NOYW1lID0gJ2RhdGUnO1xuICAgICAgICBkYXRlUGlja2VyLnRleHRDb250ZW50ID0gcHJvamVjdC5hcnJheU9mVG9kb3NbZl0uZGF0ZTtcblxuICAgICAgICBpZihpbmRleE9mVG9kYXlUYXNrKXtcbiAgICAgICAgICAgIGlmKGluZGV4T2ZUb2RheVRhc2sgPT0gZikgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS5hcHBlbmRDaGlsZCh0YXNrT25UaGVTY3JlZW4pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykuYXBwZW5kQ2hpbGQodGFza09uVGhlU2NyZWVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZighaW5kZXhPZlRvZGF5VGFzaykgVG9kb0J1dHRvbihwcm9qZWN0KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShhcnJheU9mUHJvamVjdHMpKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFByb2plY3QocHJvamVjdCkge1xuICAgIChwcm9qZWN0Lm5hbWUpID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZScpLnRleHRDb250ZW50ID0gcHJvamVjdC5uYW1lIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZScpLnRleHRDb250ZW50ID0gcHJvamVjdDtcbn1cblxuZnVuY3Rpb24gaW5wdXRQcm9qZWN0TmFtZSgpIHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5wdXRQcm9qZWN0TmFtZSk7XG4gICAgXG4gICAgdmFyIHByb2plY3RzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJyk7XG4gICAgbGV0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY2xvc2VCdXR0b24uY2xhc3NMaXN0LmFkZCgncHJvamVjdHNfX2J0bicsICdwcm9qZWN0c19fYnRuLS1jbG9zZScpO1xuICAgIGNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gJ3gnO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBwcm9qZWN0c0Rpdi5yZW1vdmVDaGlsZChpbnB1dEZvclByb2plY3ROYW1lKTtcbiAgICAgICAgcHJvamVjdHNEaXYucmVtb3ZlQ2hpbGQoc3VibWl0QnV0dG9uRm9yUHJvamVjdE5hbWUpO1xuICAgICAgICBwcm9qZWN0c0Rpdi5yZW1vdmVDaGlsZChjbG9zZUJ1dHRvbik7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnB1dFByb2plY3ROYW1lKTtcbiAgICB9KTtcbiAgICBcbiAgICB2YXIgaW5wdXRGb3JQcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXRGb3JQcm9qZWN0TmFtZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgIGlucHV0Rm9yUHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvamVjdHNfX25hbWUtaW5wdXQnKTtcbiAgICBcbiAgICBwcm9qZWN0c0Rpdi5hcHBlbmRDaGlsZChpbnB1dEZvclByb2plY3ROYW1lKTtcbiAgICBcbiAgICB2YXIgc3VibWl0QnV0dG9uRm9yUHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjbG9zZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0c19fYnRuJywgJ3Byb2plY3RzX19idG4tLXN1Ym1pdCcpO1xuXG4gICAgcHJvamVjdHNEaXYuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIHByb2plY3RzRGl2LmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbkZvclByb2plY3ROYW1lKTtcbiAgICBzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9ICdPayc7XG5cbiAgICBcbiAgICBzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IG5hbWUgPSBpbnB1dEZvclByb2plY3ROYW1lLnZhbHVlO1xuICAgICAgICBcbiAgICAgICAgaWYobmFtZSAmJiBuYW1lLmxlbmd0aCA8IDE2ICYmIGNoZWNrSWRlbnRpY2FsUHJvamVjdChuYW1lKSkge1xuICAgICAgICAgICAgcHJvamVjdHNEaXYucmVtb3ZlQ2hpbGQoaW5wdXRGb3JQcm9qZWN0TmFtZSk7XG4gICAgICAgICAgICBwcm9qZWN0c0Rpdi5yZW1vdmVDaGlsZChzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJ1dHRvbicpLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1uYW1lJykudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICAgICAgY3JlYXRlUHJvamVjdChuYW1lKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnB1dFByb2plY3ROYW1lKTtcbiAgICAgICAgfWVsc2UgaWYoY2hlY2tJZGVudGljYWxQcm9qZWN0KG5hbWUpID09IGZhbHNlKSB7XG4gICAgICAgICAgICBhbGVydCgnUHJvamVjdCBuYW1lcyBzaG91bGQgYmUgZGlmZmVyZW50Jyk7XG4gICAgICAgICAgICBpbnB1dEZvclByb2plY3ROYW1lLnZhbHVlID0gJyc7XG4gICAgICAgIH1lbHNlIGlmKG5hbWUubGVuZ3RoID49IDE2KXtcbiAgICAgICAgICAgIGFsZXJ0KCdQcm9qZWN0IG5hbWUgc2hvdWxkIGJlIGxlc3MgdGhhbiAxNiBjaGFyYWN0ZXJzJyk7XG4gICAgICAgIH1lbHNlIGlmKCFuYW1lKXtcbiAgICAgICAgICAgIGFsZXJ0KCdFbnRlciBwcm9qZWN0IG5hbWUnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjaGVja0lkZW50aWNhbFByb2plY3QobmFtZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlPZlByb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmKGFycmF5T2ZQcm9qZWN0c1tpXS5uYW1lID09IG5hbWUpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVRhc2sobmV3UHJvamVjdCwgbnVtYmVyT2ZUYXNrKSB7XG4gICAgbmV3UHJvamVjdC5hcnJheU9mVG9kb3Muc3BsaWNlKG51bWJlck9mVGFzaywgMSk7IFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xufVxuXG5mdW5jdGlvbiBkZWxldGVQcm9qZWN0KG5ld1Byb2plY3QpIHtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJyYXlPZlByb2plY3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYoYXJyYXlPZlByb2plY3RzW2ldID09IG5ld1Byb2plY3Qpe1xuICAgICAgICAgICAgYXJyYXlPZlByb2plY3RzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShhcnJheU9mUHJvamVjdHMpKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLnRleHRDb250ZW50ID0gJyc7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1idXR0b24nKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LW5hbWUnKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIHVwZGF0ZVByb2plY3RzKCk7XG59XG5cbmV4cG9ydCB7aW5wdXRQcm9qZWN0TmFtZSwgY3JlYXRlQWxsVGFza3NJblByb2plY3QsIGFycmF5T2ZQcm9qZWN0c30iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSBcIi4vdG9kb3NcIjtcbmltcG9ydCB7IGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0LCBhcnJheU9mUHJvamVjdHMgfSBmcm9tIFwiLi91cGRhdGVQcm9qZWN0c0RPTVwiO1xuXG5mdW5jdGlvbiBUb2RvQnV0dG9uKG5ld1Byb2plY3QpIHtcbiAgICBsZXQgdG9kb0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1idXR0b24nKS5hcHBlbmRDaGlsZCh0b2RvQnV0dG9uKTtcbiAgICB0b2RvQnV0dG9uLnRleHRDb250ZW50ID0gJ0NyZWF0ZSB0b2RvJztcbiAgICB0b2RvQnV0dG9uLmNsYXNzTmFtZSA9ICdjcmVhdGUtYnV0dG9uX19idG4nO1xuXG4gICAgdG9kb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY3JlYXRlUG9wdXAobmV3UHJvamVjdCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBvcHVwKG5ld1Byb2plY3QpIHtcbiAgICAvLyBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBsZXQgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtY29udGFpbmVyJyk7XG4gICAgcG9wdXAuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcbiAgICBcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBwb3B1cCkge1xuICAgICAgICAgICAgcG9wdXAuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDApJztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtaXQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXREYXRhRnJvbUZvcm0sIGZhbHNlKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdC1idXR0b25cIikucGFyYW1ldGVyID0gbmV3UHJvamVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YUZyb21Gb3JtKGUpIHtcbiAgICBsZXQgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrbmFtZScpLnZhbHVlO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgIGxldCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS52YWx1ZTtcbiAgICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZTtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGxldCB0YXNrID0gVG9kbyhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJhbWV0ZXIuYXJyYXlPZlRvZG9zLnB1c2godGFzayk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xuXG4gICAgICAgIGxldCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jb250YWluZXInKTtcbiAgICAgICAgcG9wdXAuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDApJztcblxuICAgICAgICBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChlLmN1cnJlbnRUYXJnZXQucGFyYW1ldGVyKTtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdFbnRlciB0YXNrIG5hbWUnKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IHsgVG9kb0J1dHRvbiB9IiwiZnVuY3Rpb24gVG9kbyhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpe1xuICAgIHJldHVybntcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICBwcmlvcml0eTogcHJpb3JpdHksXG4gICAgfVxufVxuXG5leHBvcnQge1RvZG99OyIsImltcG9ydCB7IGNyZWF0ZVRvZG8gfSBmcm9tIFwiLi91cGRhdGVUb2Rvc0RPTVwiO1xuaW1wb3J0IHsgaW5wdXRQcm9qZWN0TmFtZSB9IGZyb20gXCIuL3VwZGF0ZVByb2plY3RzRE9NXCI7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0c19fYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnB1dFByb2plY3ROYW1lKTsiXSwibmFtZXMiOlsiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRoaXMiLCJhcnJheU9mVG9kb3MiLCJhcnJheU9mUHJvamVjdHMiLCJjcmVhdGVQcm9qZWN0IiwibmV3UHJvamVjdCIsInB1c2giLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInRhc2tJbnNpZGVQcm9qZWN0IiwiVG9kb0J1dHRvbiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlUHJvamVjdHMiLCJpIiwibGVuZ3RoIiwicHJvamVjdCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImRlbGV0ZVByb2plY3RCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsZXRlUHJvamVjdCIsImNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0IiwiY3JlYXRlVG9kYXlzVGFza3MiLCJ0b2RheUNvbnRhaW5lciIsInRvZGF5IiwiRGF0ZSIsImRkIiwiU3RyaW5nIiwiZ2V0RGF0ZSIsInBhZFN0YXJ0IiwibW0iLCJnZXRNb250aCIsInl5eXkiLCJnZXRGdWxsWWVhciIsInVwZGF0ZUN1cnJlbnRQcm9qZWN0IiwiZm9yRWFjaCIsInRvZG8iLCJkYXRlIiwiY3JlYXRlVXBjb21pbmdUYXNrcyIsInVwY29taW5nQ29udGFpbmVyIiwiZiIsInN1YnN0ciIsImluZGV4T2ZUb2RheVRhc2siLCJvcmlnaW4iLCJ0YXNrT25UaGVTY3JlZW4iLCJjaGVja0JveCIsInRhc2tOYW1lIiwicHJvamVjdEZhdGhlciIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJzdHlsZSIsImJhY2tncm91bmQiLCJudW1iZXJPZlRhc2siLCJzcGxpY2UiLCJkYXRlUGlja2VyIiwiY2hlY2tJZGVudGljYWxQcm9qZWN0IiwidG9kb0J1dHRvbiIsInBvcHVwIiwidHJhbnNmb3JtIiwiYm9keSIsImV2ZW50IiwidGFyZ2V0IiwiZ2V0RGF0YUZyb21Gb3JtIiwicGFyYW1ldGVyIiwiY3JlYXRlUG9wdXAiLCJlIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsInRhc2siLCJUb2RvIiwiY3VycmVudFRhcmdldCIsImFsZXJ0IiwiaW5ib3giLCJjcmVhdGVJbmJveCIsImlucHV0UHJvamVjdE5hbWUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJvamVjdHNEaXYiLCJjbG9zZUJ1dHRvbiIsInJlbW92ZUNoaWxkIiwiaW5wdXRGb3JQcm9qZWN0TmFtZSIsInN1Ym1pdEJ1dHRvbkZvclByb2plY3ROYW1lIiwic2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==