(()=>{"use strict";class e{constructor(e){this.name=e,this.arrayOfTodos=[]}}function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function n(e){t(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function r(e){t(1,arguments);var r=n(e);return r.setHours(0,0,0,0),r}function o(e,n){t(2,arguments);var o=r(e),a=r(n);return o.getTime()===a.getTime()}function a(e){return t(1,arguments),o(e,Date.now())}Math.pow(10,8);var c=36e5;function i(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function l(e,n){t(1,arguments);var r=n||{},o=null==r.additionalDigits?2:i(r.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var a,c=p(e);if(c.date){var l=f(c.date,o);a=g(l.restDateString,l.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var u,s=a.getTime(),d=0;if(c.time&&(d=h(c.time),isNaN(d)))return new Date(NaN);if(!c.timezone){var m=new Date(s+d),y=new Date(0);return y.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),y.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),y}return u=b(c.timezone),isNaN(u)?new Date(NaN):new Date(s+d+u)}var u={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},s=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,m=/^([+-])(\d{2})(?::?(\d{2}))?$/;function p(e){var t,n={},r=e.split(u.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],u.timeZoneDelimiter.test(n.date)&&(n.date=e.split(u.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=u.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function f(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}function g(e,t){if(null===t)return new Date(NaN);var n=e.match(s);if(!n)return new Date(NaN);var r=!!n[4],o=y(n[1]),a=y(n[2])-1,c=y(n[3]),i=y(n[4]),l=y(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,i,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(t,i,l):new Date(NaN);var u=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(C[t]||(N(e)?29:28))}(t,a,c)&&function(e,t){return t>=1&&t<=(N(e)?366:365)}(t,o)?(u.setUTCFullYear(t,a,Math.max(o,c)),u):new Date(NaN)}function y(e){return e?parseInt(e):1}function h(e){var t=e.match(d);if(!t)return NaN;var n=v(t[1]),r=v(t[2]),o=v(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o)?n*c+6e4*r+1e3*o:NaN}function v(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(m);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?n*(r*c+6e4*o):NaN}var C=[31,null,31,30,31,30,31,31,30,31,30,31];function N(e){return e%400==0||e%4==0&&e%100!=0}function S(e,r){t(2,arguments);var o=n(e),a=n(r);return o.getTime()>a.getTime()}let E=[];function T(){document.querySelector(".projects").textContent="",E.forEach((e=>{let t=0;const n=document.createElement("div");n.className="project",n.textContent=e.name;const r=document.createElement("button");r.classList.add("project__btn"),r.textContent="x",r.addEventListener("click",(()=>{var n;document.querySelector(".create-button").textContent="",n=e,E=E.filter((e=>e!==n)),localStorage.setItem("projects",JSON.stringify(E)),T(),document.querySelector(".content").textContent="",t=1})),n.addEventListener("click",(()=>{0==t&&k(e)})),n.appendChild(r),"Inbox"!==e.name&&document.querySelector(".projects").appendChild(n)}))}function x(){document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="";let e=document.createElement("div");e.className="today",j("Today"),E.forEach((e=>{for(let t in e.arrayOfTodos)e.arrayOfTodos[t]&&a(l(e.arrayOfTodos[t].date))&&k(e,t)})),document.querySelector(".today").appendChild(e)}function D(){document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="";let e=document.createElement("div");e.className="upcoming",j("Upcoming"),E.forEach((e=>{for(let t=1;t<e.arrayOfTodos.length;t++)S(l(e.arrayOfTodos[t].date),new Date)&&k(e,t,"upcoming")})),document.querySelector(".upcoming").appendChild(e)}function k(e,t,n){t||(document.querySelector(".content").textContent="",document.querySelector(".create-button").textContent="",j(e));for(let r=1;r<e.arrayOfTodos.length;r++){const o=document.createElement("div");o.className="task";const a=document.createElement("div");a.textContent="",a.className="task__checkbox",o.appendChild(a);const c=document.createElement("div");c.textContent=e.arrayOfTodos[r].name,c.className="task__name",o.appendChild(c);const i=document.createElement("div");i.textContent="Project: "+e.name,i.className="task__origin",o.appendChild(i);const l=document.createElement("div");l.textContent=e.arrayOfTodos[r].taskDescription,l.className="task__taskDescription",o.appendChild(l);const u=document.createElement("div");switch(o.appendChild(u),u.className="task__date",u.textContent=e.arrayOfTodos[r].date,e.arrayOfTodos[r].priority){case"1":a.style.background="red";break;case"2":a.style.background="orange";break;case"3":a.style.background="yellow";break;case"0":a.style.background="white"}a.addEventListener("click",(()=>{var o;o=r,e.arrayOfTodos.splice(o,1),localStorage.setItem("projects",JSON.stringify(E)),t?t&&"upcoming"==n?D():x():k(e)})),t?t==r&&document.querySelector(".content").appendChild(o):document.querySelector(".content").appendChild(o)}t||q(e),localStorage.setItem("projects",JSON.stringify(E))}function j(e){e.name?document.querySelector(".project-name").textContent=e.name:document.querySelector(".project-name").textContent=e}function w(e){return E.filter((t=>t.name==e)).length>0}function q(e){let t=document.createElement("button");document.querySelector(".create-button").appendChild(t),t.textContent="Create todo",t.className="create-button__btn",t.addEventListener("click",(()=>{!function(e){let t=document.querySelector(".popup-container");t.style.transform="scale(1)",document.body.addEventListener("click",(function(e){e.target==t&&(t.style.transform="scale(0)")})),document.querySelector(".form__submit-button").addEventListener("click",_,!1),document.querySelector(".form__submit-button").parameter=e}(e)}))}function _(e){let t=document.getElementById("taskname").value,n=document.getElementById("description").value,r=document.getElementById("date").value,o=document.getElementById("priority").value;if(r=new Date(r),t){let a=function(e,t,n,r){return{name:e,description:t,date:n,priority:r}}(t,n,r,o);e.currentTarget.parameter.arrayOfTodos.push(a),localStorage.setItem("projects",JSON.stringify(E)),document.querySelector(".popup-container").style.transform="scale(0)",k(e.currentTarget.parameter)}else alert("Enter task name")}"projects"in localStorage&&(E=JSON.parse(localStorage.getItem("projects")||[])),function(){j("Inbox");let t=new e("Inbox");0==E.filter((e=>"Inbox"==e.name)).length&&E.push(t),q(t),localStorage.setItem("projects",JSON.stringify(E)),E.filter((e=>"Inbox"==e.name)).length>0?k(E[0]):k(t),document.querySelector(".inbox").addEventListener("click",(()=>{console.log(E),E.filter((e=>"Inbox"==e.name)).length>0?k(E[0]):k(t)}))}(),T(),document.querySelector(".today").addEventListener("click",x),document.querySelector(".upcoming").addEventListener("click",D),document.querySelector(".projects__btn").addEventListener("click",(function t(){this.removeEventListener("click",t);const n=document.querySelector(".projects"),r=document.createElement("button");r.classList.add("projects__btn","projects__btn--close"),r.textContent="x",r.addEventListener("click",(()=>{n.removeChild(o),n.removeChild(a),n.removeChild(r),this.addEventListener("click",t)}));const o=document.createElement("input");o.setAttribute("type","text"),o.classList.add("projects__name-input"),n.appendChild(o);const a=document.createElement("button");r.classList.add("projects__btn","projects__btn--submit"),n.appendChild(r),a.textContent="Ok",n.appendChild(a),a.addEventListener("click",(()=>{let r=o.value;r&&r.length<16&&!w(r)?(n.removeChild(o),n.removeChild(a),document.querySelector(".create-button").textContent="",document.querySelector(".project-name").textContent=r,function(t){let n=new e(t);E.push(n),document.querySelector(".content").textContent="";let r=q(n);if(n.arrayOfTodos.push(r),localStorage.setItem("projects",JSON.stringify(E)),"Inbox"==t)return n;T()}(r),this.addEventListener("click",t)):1==w(r)?(alert("Project names should be different"),o.value=""):r.length>=16?alert("Project name should be less than 16 characters"):r||alert("Enter project name")}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUs1QyxHQUVyQmIsU0FBU0MsY0FBYyxZQUFZQyxZQUFjLEdBRWpELElBQUlzRSxFQUFvQmhDLEVBQVczQixHQUtuQyxHQUpBQSxFQUFXNUksYUFBYXdMLEtBQUtlLEdBRTdCekQsYUFBYUMsUUFBUSxXQUFZQyxLQUFLQyxVQUFVcEIsSUFFckMsU0FBUi9ILEVBQWlCLE9BQU84SSxFQUUzQmQsSUFzTVEwRSxDQUFjMU0sR0FFZEMsS0FBSzRJLGlCQUFpQixRQUFTb0QsSUFDSyxHQUEvQnZCLEVBQXNCMUssSUFDM0IyTCxNQUFNLHFDQUNOVyxFQUFvQnJGLE1BQVEsSUFDdkJqSCxFQUFLTSxRQUFVLEdBQ3BCcUwsTUFBTSxrREFDQTNMLEdBQ04yTCxNQUFNLDZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFja2FnZS8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9jb25zdGFudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vcGFyc2VJU08vaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNBZnRlci9pbmRleC5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vc3JjL3VwZGF0ZVByb2plY3RzRE9NLmpzIiwid2VicGFjazovL3BhY2thZ2UvLi9zcmMvdXBkYXRlVG9kb3NET00uanMiLCJ3ZWJwYWNrOi8vcGFja2FnZS8uL3NyYy90b2Rvcy5qcyIsIndlYnBhY2s6Ly9wYWNrYWdlLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFByb2plY3R7XG4gICAgY29uc3RydWN0b3IobmFtZSl7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYXJyYXlPZlRvZG9zID0gW107XG4gICAgfVxuICAgIFxuICAgIC8vZnVuY3Rpb25zIHRvIGFsdGVyIHRhc2tzIGluc2lkZSBhIHByb2plY3Rcbn1cblxuZXhwb3J0IHtQcm9qZWN0fTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJpbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBhcmd1bWVudCA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXQuaW8vZmp1bGVcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZkRheSBmcm9tIFwiLi4vc3RhcnRPZkRheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNTYW1lRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCwgNiwgMCksIG5ldyBEYXRlKDIwMTQsIDgsIDQsIDE4LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICogXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIsIDIwMTQgYW5kIDQgU2VwdGVtYmVyLCAyMDE1IGluIHRoZSBzYW1lIGRheT9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZURheShkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlTGVmdCk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVSaWdodCk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZEYXkuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mRGF5LmdldFRpbWUoKTtcbn0iLCJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgdG9kYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyA2IE9jdG9iZXIgMjAxNCwgaXMgNiBPY3RvYmVyIDE0OjAwOjAwIHRvZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUb2RheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVEYXkoZGlydHlEYXRlLCBEYXRlLm5vdygpKTtcbn0iLCIvKipcbiAqIERheXMgaW4gMSB3ZWVrLlxuICpcbiAqIEBuYW1lIGRheXNJbldlZWtcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgZGF5c0luV2VlayA9IDc7XG4vKipcbiAqIE1heGltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBuYW1lIG1heFRpbWVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtYXhUaW1lID0gTWF0aC5wb3coMTAsIDgpICogMjQgKiA2MCAqIDYwICogMTAwMDtcbi8qKlxuICogTWlsbGlzZWNvbmRzIGluIDEgbWludXRlXG4gKlxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5NaW51dGVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtaWxsaXNlY29uZHNJbk1pbnV0ZSA9IDYwMDAwO1xuLyoqXG4gKiBNaWxsaXNlY29uZHMgaW4gMSBob3VyXG4gKlxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5Ib3VyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5Ib3VyID0gMzYwMDAwMDtcbi8qKlxuICogTWlsbGlzZWNvbmRzIGluIDEgc2Vjb25kXG4gKlxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5TZWNvbmRcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtaWxsaXNlY29uZHNJblNlY29uZCA9IDEwMDA7XG4vKipcbiAqIE1pbmltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBuYW1lIG1pblRpbWVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtaW5UaW1lID0gLW1heFRpbWU7XG4vKipcbiAqIE1pbnV0ZXMgaW4gMSBob3VyXG4gKlxuICogQG5hbWUgbWludXRlc0luSG91clxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1pbnV0ZXNJbkhvdXIgPSA2MDtcbi8qKlxuICogTW9udGhzIGluIDEgcXVhcnRlclxuICpcbiAqIEBuYW1lIG1vbnRoc0luUXVhcnRlclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1vbnRoc0luUXVhcnRlciA9IDM7XG4vKipcbiAqIE1vbnRocyBpbiAxIHllYXJcbiAqXG4gKiBAbmFtZSBtb250aHNJblllYXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtb250aHNJblllYXIgPSAxMjtcbi8qKlxuICogUXVhcnRlcnMgaW4gMSB5ZWFyXG4gKlxuICogQG5hbWUgcXVhcnRlcnNJblllYXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBxdWFydGVyc0luWWVhciA9IDQ7XG4vKipcbiAqIFNlY29uZHMgaW4gMSBob3VyXG4gKlxuICogQG5hbWUgc2Vjb25kc0luSG91clxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIHNlY29uZHNJbkhvdXIgPSAzNjAwO1xuLyoqXG4gKiBTZWNvbmRzIGluIDEgbWludXRlXG4gKlxuICogQG5hbWUgc2Vjb25kc0luTWludXRlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgc2Vjb25kc0luTWludXRlID0gNjA7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbkhvdXIsIG1pbGxpc2Vjb25kc0luTWludXRlIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHBhcnNlSVNPXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFBhcnNlIElTTyBzdHJpbmdcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFBhcnNlIHRoZSBnaXZlbiBzdHJpbmcgaW4gSVNPIDg2MDEgZm9ybWF0IGFuZCByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBGdW5jdGlvbiBhY2NlcHRzIGNvbXBsZXRlIElTTyA4NjAxIGZvcm1hdHMgYXMgd2VsbCBhcyBwYXJ0aWFsIGltcGxlbWVudGF0aW9ucy5cbiAqIElTTyA4NjAxOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzbid0IGEgc3RyaW5nLCB0aGUgZnVuY3Rpb24gY2Fubm90IHBhcnNlIHRoZSBzdHJpbmcgb3JcbiAqIHRoZSB2YWx1ZXMgYXJlIGludmFsaWQsIGl0IHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogLSBUaGUgcHJldmlvdXMgYHBhcnNlYCBpbXBsZW1lbnRhdGlvbiB3YXMgcmVuYW1lZCB0byBgcGFyc2VJU09gLlxuICpcbiAqICAgYGBgamF2YXNjcmlwdFxuICogICAvLyBCZWZvcmUgdjIuMC4wXG4gKiAgIHBhcnNlKCcyMDE2LTAxLTAxJylcbiAqXG4gKiAgIC8vIHYyLjAuMCBvbndhcmRcbiAqICAgcGFyc2VJU08oJzIwMTYtMDEtMDEnKVxuICogICBgYGBcbiAqXG4gKiAtIGBwYXJzZUlTT2Agbm93IHZhbGlkYXRlcyBzZXBhcmF0ZSBkYXRlIGFuZCB0aW1lIHZhbHVlcyBpbiBJU08tODYwMSBzdHJpbmdzXG4gKiAgIGFuZCByZXR1cm5zIGBJbnZhbGlkIERhdGVgIGlmIHRoZSBkYXRlIGlzIGludmFsaWQuXG4gKlxuICogICBgYGBqYXZhc2NyaXB0XG4gKiAgIHBhcnNlSVNPKCcyMDE4LTEzLTMyJylcbiAqICAgLy89PiBJbnZhbGlkIERhdGVcbiAqICAgYGBgXG4gKlxuICogLSBgcGFyc2VJU09gIG5vdyBkb2Vzbid0IGZhbGwgYmFjayB0byBgbmV3IERhdGVgIGNvbnN0cnVjdG9yXG4gKiAgIGlmIGl0IGZhaWxzIHRvIHBhcnNlIGEgc3RyaW5nIGFyZ3VtZW50LiBJbnN0ZWFkLCBpdCByZXR1cm5zIGBJbnZhbGlkIERhdGVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7MHwxfDJ9IFtvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM9Ml0gLSB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHNgIG11c3QgYmUgMCwgMSBvciAyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgc3RyaW5nICcyMDE0LTAyLTExVDExOjMwOjMwJyB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gcGFyc2VJU08oJzIwMTQtMDItMTFUMTE6MzA6MzAnKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCBzdHJpbmcgJyswMjAxNDEwMScgdG8gZGF0ZSxcbiAqIC8vIGlmIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0IGlzIDE6XG4gKiBjb25zdCByZXN1bHQgPSBwYXJzZUlTTygnKzAyMDE0MTAxJywgeyBhZGRpdGlvbmFsRGlnaXRzOiAxIH0pXG4gKiAvLz0+IEZyaSBBcHIgMTEgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlSVNPKGFyZ3VtZW50LCBkaXJ0eU9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICB2YXIgYWRkaXRpb25hbERpZ2l0cyA9IG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0cyA9PSBudWxsID8gMiA6IHRvSW50ZWdlcihvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHMpO1xuXG4gIGlmIChhZGRpdGlvbmFsRGlnaXRzICE9PSAyICYmIGFkZGl0aW9uYWxEaWdpdHMgIT09IDEgJiYgYWRkaXRpb25hbERpZ2l0cyAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhZGRpdGlvbmFsRGlnaXRzIG11c3QgYmUgMCwgMSBvciAyJyk7XG4gIH1cblxuICBpZiAoISh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCkgPT09ICdbb2JqZWN0IFN0cmluZ10nKSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG5cbiAgdmFyIGRhdGVTdHJpbmdzID0gc3BsaXREYXRlU3RyaW5nKGFyZ3VtZW50KTtcbiAgdmFyIGRhdGU7XG5cbiAgaWYgKGRhdGVTdHJpbmdzLmRhdGUpIHtcbiAgICB2YXIgcGFyc2VZZWFyUmVzdWx0ID0gcGFyc2VZZWFyKGRhdGVTdHJpbmdzLmRhdGUsIGFkZGl0aW9uYWxEaWdpdHMpO1xuICAgIGRhdGUgPSBwYXJzZURhdGUocGFyc2VZZWFyUmVzdWx0LnJlc3REYXRlU3RyaW5nLCBwYXJzZVllYXJSZXN1bHQueWVhcik7XG4gIH1cblxuICBpZiAoIWRhdGUgfHwgaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gIHZhciB0aW1lID0gMDtcbiAgdmFyIG9mZnNldDtcblxuICBpZiAoZGF0ZVN0cmluZ3MudGltZSkge1xuICAgIHRpbWUgPSBwYXJzZVRpbWUoZGF0ZVN0cmluZ3MudGltZSk7XG5cbiAgICBpZiAoaXNOYU4odGltZSkpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkYXRlU3RyaW5ncy50aW1lem9uZSkge1xuICAgIG9mZnNldCA9IHBhcnNlVGltZXpvbmUoZGF0ZVN0cmluZ3MudGltZXpvbmUpO1xuXG4gICAgaWYgKGlzTmFOKG9mZnNldCkpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlydHlEYXRlID0gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSk7IC8vIGpzIHBhcnNlZCBzdHJpbmcgYXNzdW1pbmcgaXQncyBpbiBVVEMgdGltZXpvbmVcbiAgICAvLyBidXQgd2UgbmVlZCBpdCB0byBiZSBwYXJzZWQgaW4gb3VyIHRpbWV6b25lXG4gICAgLy8gc28gd2UgdXNlIHV0YyB2YWx1ZXMgdG8gYnVpbGQgZGF0ZSBpbiBvdXIgdGltZXpvbmUuXG4gICAgLy8gWWVhciB2YWx1ZXMgZnJvbSAwIHRvIDk5IG1hcCB0byB0aGUgeWVhcnMgMTkwMCB0byAxOTk5XG4gICAgLy8gc28gc2V0IHllYXIgZXhwbGljaXRseSB3aXRoIHNldEZ1bGxZZWFyLlxuXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBEYXRlKDApO1xuICAgIHJlc3VsdC5zZXRGdWxsWWVhcihkaXJ0eURhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGlydHlEYXRlLmdldFVUQ01vbnRoKCksIGRpcnR5RGF0ZS5nZXRVVENEYXRlKCkpO1xuICAgIHJlc3VsdC5zZXRIb3VycyhkaXJ0eURhdGUuZ2V0VVRDSG91cnMoKSwgZGlydHlEYXRlLmdldFVUQ01pbnV0ZXMoKSwgZGlydHlEYXRlLmdldFVUQ1NlY29uZHMoKSwgZGlydHlEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUgKyBvZmZzZXQpO1xufVxudmFyIHBhdHRlcm5zID0ge1xuICBkYXRlVGltZURlbGltaXRlcjogL1tUIF0vLFxuICB0aW1lWm9uZURlbGltaXRlcjogL1taIF0vaSxcbiAgdGltZXpvbmU6IC8oW1orLV0uKikkL1xufTtcbnZhciBkYXRlUmVnZXggPSAvXi0/KD86KFxcZHszfSl8KFxcZHsyfSkoPzotPyhcXGR7Mn0pKT98VyhcXGR7Mn0pKD86LT8oXFxkezF9KSk/fCkkLztcbnZhciB0aW1lUmVnZXggPSAvXihcXGR7Mn0oPzpbLixdXFxkKik/KSg/Ojo/KFxcZHsyfSg/OlsuLF1cXGQqKT8pKT8oPzo6PyhcXGR7Mn0oPzpbLixdXFxkKik/KSk/JC87XG52YXIgdGltZXpvbmVSZWdleCA9IC9eKFsrLV0pKFxcZHsyfSkoPzo6PyhcXGR7Mn0pKT8kLztcblxuZnVuY3Rpb24gc3BsaXREYXRlU3RyaW5nKGRhdGVTdHJpbmcpIHtcbiAgdmFyIGRhdGVTdHJpbmdzID0ge307XG4gIHZhciBhcnJheSA9IGRhdGVTdHJpbmcuc3BsaXQocGF0dGVybnMuZGF0ZVRpbWVEZWxpbWl0ZXIpO1xuICB2YXIgdGltZVN0cmluZzsgLy8gVGhlIHJlZ2V4IG1hdGNoIHNob3VsZCBvbmx5IHJldHVybiBhdCBtYXhpbXVtIHR3byBhcnJheSBlbGVtZW50cy5cbiAgLy8gW2RhdGVdLCBbdGltZV0sIG9yIFtkYXRlLCB0aW1lXS5cblxuICBpZiAoYXJyYXkubGVuZ3RoID4gMikge1xuICAgIHJldHVybiBkYXRlU3RyaW5ncztcbiAgfVxuXG4gIGlmICgvOi8udGVzdChhcnJheVswXSkpIHtcbiAgICB0aW1lU3RyaW5nID0gYXJyYXlbMF07XG4gIH0gZWxzZSB7XG4gICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGFycmF5WzBdO1xuICAgIHRpbWVTdHJpbmcgPSBhcnJheVsxXTtcblxuICAgIGlmIChwYXR0ZXJucy50aW1lWm9uZURlbGltaXRlci50ZXN0KGRhdGVTdHJpbmdzLmRhdGUpKSB7XG4gICAgICBkYXRlU3RyaW5ncy5kYXRlID0gZGF0ZVN0cmluZy5zcGxpdChwYXR0ZXJucy50aW1lWm9uZURlbGltaXRlcilbMF07XG4gICAgICB0aW1lU3RyaW5nID0gZGF0ZVN0cmluZy5zdWJzdHIoZGF0ZVN0cmluZ3MuZGF0ZS5sZW5ndGgsIGRhdGVTdHJpbmcubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICBpZiAodGltZVN0cmluZykge1xuICAgIHZhciB0b2tlbiA9IHBhdHRlcm5zLnRpbWV6b25lLmV4ZWModGltZVN0cmluZyk7XG5cbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIGRhdGVTdHJpbmdzLnRpbWUgPSB0aW1lU3RyaW5nLnJlcGxhY2UodG9rZW5bMV0sICcnKTtcbiAgICAgIGRhdGVTdHJpbmdzLnRpbWV6b25lID0gdG9rZW5bMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGVTdHJpbmdzLnRpbWUgPSB0aW1lU3RyaW5nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYXRlU3RyaW5ncztcbn1cblxuZnVuY3Rpb24gcGFyc2VZZWFyKGRhdGVTdHJpbmcsIGFkZGl0aW9uYWxEaWdpdHMpIHtcbiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXig/OihcXFxcZHs0fXxbKy1dXFxcXGR7JyArICg0ICsgYWRkaXRpb25hbERpZ2l0cykgKyAnfSl8KFxcXFxkezJ9fFsrLV1cXFxcZHsnICsgKDIgKyBhZGRpdGlvbmFsRGlnaXRzKSArICd9KSQpJyk7XG4gIHZhciBjYXB0dXJlcyA9IGRhdGVTdHJpbmcubWF0Y2gocmVnZXgpOyAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgeWVhclxuXG4gIGlmICghY2FwdHVyZXMpIHJldHVybiB7XG4gICAgeWVhcjogTmFOLFxuICAgIHJlc3REYXRlU3RyaW5nOiAnJ1xuICB9O1xuICB2YXIgeWVhciA9IGNhcHR1cmVzWzFdID8gcGFyc2VJbnQoY2FwdHVyZXNbMV0pIDogbnVsbDtcbiAgdmFyIGNlbnR1cnkgPSBjYXB0dXJlc1syXSA/IHBhcnNlSW50KGNhcHR1cmVzWzJdKSA6IG51bGw7IC8vIGVpdGhlciB5ZWFyIG9yIGNlbnR1cnkgaXMgbnVsbCwgbm90IGJvdGhcblxuICByZXR1cm4ge1xuICAgIHllYXI6IGNlbnR1cnkgPT09IG51bGwgPyB5ZWFyIDogY2VudHVyeSAqIDEwMCxcbiAgICByZXN0RGF0ZVN0cmluZzogZGF0ZVN0cmluZy5zbGljZSgoY2FwdHVyZXNbMV0gfHwgY2FwdHVyZXNbMl0pLmxlbmd0aClcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGVTdHJpbmcsIHllYXIpIHtcbiAgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXJcbiAgaWYgKHllYXIgPT09IG51bGwpIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB2YXIgY2FwdHVyZXMgPSBkYXRlU3RyaW5nLm1hdGNoKGRhdGVSZWdleCk7IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCBzdHJpbmdcblxuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgdmFyIGlzV2Vla0RhdGUgPSAhIWNhcHR1cmVzWzRdO1xuICB2YXIgZGF5T2ZZZWFyID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1sxXSk7XG4gIHZhciBtb250aCA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbMl0pIC0gMTtcbiAgdmFyIGRheSA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbM10pO1xuICB2YXIgd2VlayA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbNF0pO1xuICB2YXIgZGF5T2ZXZWVrID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1s1XSkgLSAxO1xuXG4gIGlmIChpc1dlZWtEYXRlKSB7XG4gICAgaWYgKCF2YWxpZGF0ZVdlZWtEYXRlKHllYXIsIHdlZWssIGRheU9mV2VlaykpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cblxuICAgIHJldHVybiBkYXlPZklTT1dlZWtZZWFyKHllYXIsIHdlZWssIGRheU9mV2Vlayk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTtcblxuICAgIGlmICghdmFsaWRhdGVEYXRlKHllYXIsIG1vbnRoLCBkYXkpIHx8ICF2YWxpZGF0ZURheU9mWWVhckRhdGUoeWVhciwgZGF5T2ZZZWFyKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuXG4gICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCBtb250aCwgTWF0aC5tYXgoZGF5T2ZZZWFyLCBkYXkpKTtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZURhdGVVbml0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA/IHBhcnNlSW50KHZhbHVlKSA6IDE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZSh0aW1lU3RyaW5nKSB7XG4gIHZhciBjYXB0dXJlcyA9IHRpbWVTdHJpbmcubWF0Y2godGltZVJlZ2V4KTtcbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIE5hTjsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHRpbWVcblxuICB2YXIgaG91cnMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzFdKTtcbiAgdmFyIG1pbnV0ZXMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzJdKTtcbiAgdmFyIHNlY29uZHMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzNdKTtcblxuICBpZiAoIXZhbGlkYXRlVGltZShob3VycywgbWludXRlcywgc2Vjb25kcykpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgcmV0dXJuIGhvdXJzICogbWlsbGlzZWNvbmRzSW5Ib3VyICsgbWludXRlcyAqIG1pbGxpc2Vjb25kc0luTWludXRlICsgc2Vjb25kcyAqIDEwMDA7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZVVuaXQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICYmIHBhcnNlRmxvYXQodmFsdWUucmVwbGFjZSgnLCcsICcuJykpIHx8IDA7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZXpvbmUodGltZXpvbmVTdHJpbmcpIHtcbiAgaWYgKHRpbWV6b25lU3RyaW5nID09PSAnWicpIHJldHVybiAwO1xuICB2YXIgY2FwdHVyZXMgPSB0aW1lem9uZVN0cmluZy5tYXRjaCh0aW1lem9uZVJlZ2V4KTtcbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIDA7XG4gIHZhciBzaWduID0gY2FwdHVyZXNbMV0gPT09ICcrJyA/IC0xIDogMTtcbiAgdmFyIGhvdXJzID0gcGFyc2VJbnQoY2FwdHVyZXNbMl0pO1xuICB2YXIgbWludXRlcyA9IGNhcHR1cmVzWzNdICYmIHBhcnNlSW50KGNhcHR1cmVzWzNdKSB8fCAwO1xuXG4gIGlmICghdmFsaWRhdGVUaW1lem9uZShob3VycywgbWludXRlcykpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgcmV0dXJuIHNpZ24gKiAoaG91cnMgKiBtaWxsaXNlY29uZHNJbkhvdXIgKyBtaW51dGVzICogbWlsbGlzZWNvbmRzSW5NaW51dGUpO1xufVxuXG5mdW5jdGlvbiBkYXlPZklTT1dlZWtZZWFyKGlzb1dlZWtZZWFyLCB3ZWVrLCBkYXkpIHtcbiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTtcbiAgZGF0ZS5zZXRVVENGdWxsWWVhcihpc29XZWVrWWVhciwgMCwgNCk7XG4gIHZhciBmb3VydGhPZkphbnVhcnlEYXkgPSBkYXRlLmdldFVUQ0RheSgpIHx8IDc7XG4gIHZhciBkaWZmID0gKHdlZWsgLSAxKSAqIDcgKyBkYXkgKyAxIC0gZm91cnRoT2ZKYW51YXJ5RGF5O1xuICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyBkaWZmKTtcbiAgcmV0dXJuIGRhdGU7XG59IC8vIFZhbGlkYXRpb24gZnVuY3Rpb25zXG4vLyBGZWJydWFyeSBpcyBudWxsIHRvIGhhbmRsZSB0aGUgbGVhcCB5ZWFyICh1c2luZyB8fClcblxuXG52YXIgZGF5c0luTW9udGhzID0gWzMxLCBudWxsLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XG5cbmZ1bmN0aW9uIGlzTGVhcFllYXJJbmRleCh5ZWFyKSB7XG4gIHJldHVybiB5ZWFyICUgNDAwID09PSAwIHx8IHllYXIgJSA0ID09PSAwICYmIHllYXIgJSAxMDAgIT09IDA7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGF0ZSh5ZWFyLCBtb250aCwgZGF0ZSkge1xuICByZXR1cm4gbW9udGggPj0gMCAmJiBtb250aCA8PSAxMSAmJiBkYXRlID49IDEgJiYgZGF0ZSA8PSAoZGF5c0luTW9udGhzW21vbnRoXSB8fCAoaXNMZWFwWWVhckluZGV4KHllYXIpID8gMjkgOiAyOCkpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURheU9mWWVhckRhdGUoeWVhciwgZGF5T2ZZZWFyKSB7XG4gIHJldHVybiBkYXlPZlllYXIgPj0gMSAmJiBkYXlPZlllYXIgPD0gKGlzTGVhcFllYXJJbmRleCh5ZWFyKSA/IDM2NiA6IDM2NSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlV2Vla0RhdGUoX3llYXIsIHdlZWssIGRheSkge1xuICByZXR1cm4gd2VlayA+PSAxICYmIHdlZWsgPD0gNTMgJiYgZGF5ID49IDAgJiYgZGF5IDw9IDY7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVGltZShob3VycywgbWludXRlcywgc2Vjb25kcykge1xuICBpZiAoaG91cnMgPT09IDI0KSB7XG4gICAgcmV0dXJuIG1pbnV0ZXMgPT09IDAgJiYgc2Vjb25kcyA9PT0gMDtcbiAgfVxuXG4gIHJldHVybiBzZWNvbmRzID49IDAgJiYgc2Vjb25kcyA8IDYwICYmIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDwgNjAgJiYgaG91cnMgPj0gMCAmJiBob3VycyA8IDI1O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRpbWV6b25lKF9ob3VycywgbWludXRlcykge1xuICByZXR1cm4gbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPD0gNTk7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc0FmdGVyXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBmaXJzdCBkYXRlIGFmdGVyIHRoZSBzZWNvbmQgb25lP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGZpcnN0IGRhdGUgYWZ0ZXIgdGhlIHNlY29uZCBvbmU/XG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdGhhdCBzaG91bGQgYmUgYWZ0ZXIgdGhlIG90aGVyIG9uZSB0byByZXR1cm4gdHJ1ZVxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVRvQ29tcGFyZSAtIHRoZSBkYXRlIHRvIGNvbXBhcmUgd2l0aFxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBmaXJzdCBkYXRlIGlzIGFmdGVyIHRoZSBzZWNvbmQgZGF0ZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJcyAxMCBKdWx5IDE5ODkgYWZ0ZXIgMTEgRmVicnVhcnkgMTk4Nz9cbiAqIHZhciByZXN1bHQgPSBpc0FmdGVyKG5ldyBEYXRlKDE5ODksIDYsIDEwKSwgbmV3IERhdGUoMTk4NywgMSwgMTEpKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNBZnRlcihkaXJ0eURhdGUsIGRpcnR5RGF0ZVRvQ29tcGFyZSkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRhdGVUb0NvbXBhcmUgPSB0b0RhdGUoZGlydHlEYXRlVG9Db21wYXJlKTtcbiAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpID4gZGF0ZVRvQ29tcGFyZS5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgeyBUb2RvQnV0dG9uIH0gZnJvbSBcIi4vdXBkYXRlVG9kb3NET01cIjtcbmltcG9ydCB7IGlzQWZ0ZXIsIGlzVG9kYXksIHBhcnNlSVNPIH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG5sZXQgYXJyYXlPZlByb2plY3RzID0gW107XG5cbihmdW5jdGlvbiBjaGVja1Byb2plY3RzT25SZWxvYWQoKSB7XG4gICAgaWYoJ3Byb2plY3RzJyBpbiBsb2NhbFN0b3JhZ2Upe1xuICAgICAgICBhcnJheU9mUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpIHx8IFtdKTtcbiAgICB9XG5cbiAgICBjcmVhdGVJbmJveCgpO1xuICAgIFxuICAgIHVwZGF0ZVByb2plY3RzKCk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kYXknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZVRvZGF5c1Rhc2tzKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXBjb21pbmcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZVVwY29taW5nVGFza3MpO1xufSkoKTtcblxuZnVuY3Rpb24gY3JlYXRlSW5ib3goKSB7XG4gICAgdXBkYXRlQ3VycmVudFByb2plY3QoJ0luYm94Jyk7XG4gICAgXG4gICAgbGV0IGluYm94ID0gbmV3IFByb2plY3QoJ0luYm94Jyk7XG4gICAgaWYoYXJyYXlPZlByb2plY3RzLmZpbHRlcihwcm9qZWN0ID0+IHByb2plY3QubmFtZSA9PSAnSW5ib3gnKS5sZW5ndGggPT0gMCkgYXJyYXlPZlByb2plY3RzLnB1c2goaW5ib3gpO1xuICAgIFxuICAgIFRvZG9CdXR0b24oaW5ib3gpO1xuICAgIFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xuICAgIChhcnJheU9mUHJvamVjdHMuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5uYW1lID09ICdJbmJveCcpLmxlbmd0aCA+IDApID8gY3JlYXRlQWxsVGFza3NJblByb2plY3QoYXJyYXlPZlByb2plY3RzWzBdKSA6IGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KGluYm94KTtcbiAgICBcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5ib3gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYXJyYXlPZlByb2plY3RzKTtcbiAgICAgICAgKGFycmF5T2ZQcm9qZWN0cy5maWx0ZXIocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUgPT0gJ0luYm94JykubGVuZ3RoID4gMCkgPyBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChhcnJheU9mUHJvamVjdHNbMF0pIDogY3JlYXRlQWxsVGFza3NJblByb2plY3QoaW5ib3gpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0KG5hbWUpIHtcbiAgICBsZXQgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KG5hbWUpO1xuICAgIGFycmF5T2ZQcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS50ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgbGV0IHRhc2tJbnNpZGVQcm9qZWN0ID0gVG9kb0J1dHRvbihuZXdQcm9qZWN0KTtcbiAgICBuZXdQcm9qZWN0LmFycmF5T2ZUb2Rvcy5wdXNoKHRhc2tJbnNpZGVQcm9qZWN0KTtcblxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xuXG4gICAgaWYobmFtZSA9PSAnSW5ib3gnKSByZXR1cm4gbmV3UHJvamVjdDtcbiAgICAgICAgXG4gICAgdXBkYXRlUHJvamVjdHMoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUHJvamVjdHMoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJykudGV4dENvbnRlbnQgPSAnJztcbiAgICBcbiAgICBhcnJheU9mUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0SW5BcnJheSA9PiB7XG4gICAgICAgIGxldCBkZWxldGVCdXR0b25JbmRleCA9IDA7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBwcm9qZWN0LmNsYXNzTmFtZSA9ICdwcm9qZWN0JztcbiAgICAgICAgICAgIFxuICAgICAgICBwcm9qZWN0LnRleHRDb250ZW50ID0gcHJvamVjdEluQXJyYXkubmFtZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRlbGV0ZVByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgZGVsZXRlUHJvamVjdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0X19idG4nKTtcbiAgICAgICAgZGVsZXRlUHJvamVjdEJ1dHRvbi50ZXh0Q29udGVudCA9ICd4JztcbiAgICAgICAgXG4gICAgICAgIGRlbGV0ZVByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJ1dHRvbicpLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICBkZWxldGVQcm9qZWN0KHByb2plY3RJbkFycmF5KTtcbiAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbkluZGV4ID0gMTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYoZGVsZXRlQnV0dG9uSW5kZXggPT0gMCkgY3JlYXRlQWxsVGFza3NJblByb2plY3QocHJvamVjdEluQXJyYXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICBwcm9qZWN0LmFwcGVuZENoaWxkKGRlbGV0ZVByb2plY3RCdXR0b24pO1xuICAgICAgICBpZihwcm9qZWN0SW5BcnJheS5uYW1lICE9PSAnSW5ib3gnKXtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cycpLmFwcGVuZENoaWxkKHByb2plY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRvZGF5c1Rhc2tzKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykudGV4dENvbnRlbnQgPSAnJztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJ1dHRvbicpLnRleHRDb250ZW50ID0gJyc7XG4gICAgXG4gICAgbGV0IHRvZGF5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdG9kYXlDb250YWluZXIuY2xhc3NOYW1lID0gJ3RvZGF5JztcblxuICAgIHVwZGF0ZUN1cnJlbnRQcm9qZWN0KCdUb2RheScpO1xuXG4gICAgYXJyYXlPZlByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGZvciAobGV0IGYgaW4gcHJvamVjdC5hcnJheU9mVG9kb3MpIHtcbiAgICAgICAgICAgIGlmKHByb2plY3QuYXJyYXlPZlRvZG9zW2ZdKXtcbiAgICAgICAgICAgICAgICBpZihpc1RvZGF5KHBhcnNlSVNPKHByb2plY3QuYXJyYXlPZlRvZG9zW2ZdLmRhdGUpKSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChwcm9qZWN0LCBmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RheScpLmFwcGVuZENoaWxkKHRvZGF5Q29udGFpbmVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVXBjb21pbmdUYXNrcygpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLnRleHRDb250ZW50ID0gJyc7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1idXR0b24nKS50ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgbGV0IHVwY29taW5nQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdXBjb21pbmdDb250YWluZXIuY2xhc3NOYW1lID0gJ3VwY29taW5nJztcblxuICAgIHVwZGF0ZUN1cnJlbnRQcm9qZWN0KCdVcGNvbWluZycpO1xuXG4gICAgYXJyYXlPZlByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGZvcihsZXQgZiA9IDE7IGYgPCBwcm9qZWN0LmFycmF5T2ZUb2Rvcy5sZW5ndGg7IGYrKykge1xuICAgICAgICAgICAgaWYoaXNBZnRlcihwYXJzZUlTTyhwcm9qZWN0LmFycmF5T2ZUb2Rvc1tmXS5kYXRlKSwgbmV3IERhdGUoKSkpe1xuICAgICAgICAgICAgICAgIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KHByb2plY3QsIGYsICd1cGNvbWluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXBjb21pbmcnKS5hcHBlbmRDaGlsZCh1cGNvbWluZ0NvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFsbFRhc2tzSW5Qcm9qZWN0KHByb2plY3QsIGluZGV4T2ZUb2RheVRhc2ssIG9yaWdpbikge1xuICAgIGlmICghaW5kZXhPZlRvZGF5VGFzaykge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYnV0dG9uJykudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdXBkYXRlQ3VycmVudFByb2plY3QocHJvamVjdCk7XG4gICAgfVxuXG4gICAgZm9yKGxldCBmID0gMTsgZiA8IHByb2plY3QuYXJyYXlPZlRvZG9zLmxlbmd0aDsgZisrKSB7XG4gICAgICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0Rpdi5jbGFzc05hbWUgPSAndGFzayc7XG5cbiAgICAgICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2tDaGVja2JveC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB0YXNrQ2hlY2tib3guY2xhc3NOYW1lID0gJ3Rhc2tfX2NoZWNrYm94JztcbiAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrQ2hlY2tib3gpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2tOYW1lLnRleHRDb250ZW50ID0gcHJvamVjdC5hcnJheU9mVG9kb3NbZl0ubmFtZTtcbiAgICAgICAgdGFza05hbWUuY2xhc3NOYW1lID0gJ3Rhc2tfX25hbWUnO1xuICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tOYW1lKTtcblxuICAgICAgICBjb25zdCB0YXNrT3JpZ2luID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2tPcmlnaW4udGV4dENvbnRlbnQgPSAnUHJvamVjdDogJyArIHByb2plY3QubmFtZTtcbiAgICAgICAgdGFza09yaWdpbi5jbGFzc05hbWUgPSAndGFza19fb3JpZ2luJztcbiAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrT3JpZ2luKTtcblxuICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcHJvamVjdC5hcnJheU9mVG9kb3NbZl0udGFza0Rlc2NyaXB0aW9uO1xuICAgICAgICB0YXNrRGVzY3JpcHRpb24uY2xhc3NOYW1lID0gJ3Rhc2tfX3Rhc2tEZXNjcmlwdGlvbic7XG4gICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0RhdGUpO1xuICAgICAgICB0YXNrRGF0ZS5jbGFzc05hbWUgPSAndGFza19fZGF0ZSc7XG4gICAgICAgIHRhc2tEYXRlLnRleHRDb250ZW50ID0gcHJvamVjdC5hcnJheU9mVG9kb3NbZl0uZGF0ZTtcblxuICAgICAgICBzd2l0Y2ggKHByb2plY3QuYXJyYXlPZlRvZG9zW2ZdLnByaW9yaXR5KSB7XG4gICAgICAgICAgICBjYXNlICcxJzpcbiAgICAgICAgICAgICAgICB0YXNrQ2hlY2tib3guc3R5bGUuYmFja2dyb3VuZCA9ICdyZWQnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMic6XG4gICAgICAgICAgICAgICAgdGFza0NoZWNrYm94LnN0eWxlLmJhY2tncm91bmQgPSAnb3JhbmdlJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzMnOlxuICAgICAgICAgICAgICAgIHRhc2tDaGVja2JveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3llbGxvdyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcwJzpcbiAgICAgICAgICAgICAgICB0YXNrQ2hlY2tib3guc3R5bGUuYmFja2dyb3VuZCA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFza0NoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlVGFzayhwcm9qZWN0LCBmKTtcbiAgICAgICAgICAgIGlmKCFpbmRleE9mVG9kYXlUYXNrKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlQWxsVGFza3NJblByb2plY3QocHJvamVjdCk7XG4gICAgICAgICAgICB9ZWxzZSBpZihpbmRleE9mVG9kYXlUYXNrICYmIG9yaWdpbiA9PSAndXBjb21pbmcnKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlVXBjb21pbmdUYXNrcygpO1xuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIGNyZWF0ZVRvZGF5c1Rhc2tzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgaWYoaW5kZXhPZlRvZGF5VGFzaykge1xuICAgICAgICAgICAgaWYoaW5kZXhPZlRvZGF5VGFzayA9PSBmKSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLmFwcGVuZENoaWxkKHRhc2tEaXYpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLmFwcGVuZENoaWxkKHRhc2tEaXYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYoIWluZGV4T2ZUb2RheVRhc2spIFRvZG9CdXR0b24ocHJvamVjdCk7XG4gICAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoYXJyYXlPZlByb2plY3RzKSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRQcm9qZWN0KHByb2plY3QpIHtcbiAgICAocHJvamVjdC5uYW1lKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LW5hbWUnKS50ZXh0Q29udGVudCA9IHByb2plY3QubmFtZSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LW5hbWUnKS50ZXh0Q29udGVudCA9IHByb2plY3Q7XG59XG5cbmZ1bmN0aW9uIGlucHV0UHJvamVjdE5hbWUoKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGlucHV0UHJvamVjdE5hbWUpO1xuICAgIFxuICAgIGNvbnN0IHByb2plY3RzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJyk7XG5cbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RzX19idG4nLCAncHJvamVjdHNfX2J0bi0tY2xvc2UnKTtcbiAgICBjbG9zZUJ1dHRvbi50ZXh0Q29udGVudCA9ICd4JztcblxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBwcm9qZWN0c0Rpdi5yZW1vdmVDaGlsZChpbnB1dEZvclByb2plY3ROYW1lKTtcbiAgICAgICAgcHJvamVjdHNEaXYucmVtb3ZlQ2hpbGQoc3VibWl0QnV0dG9uRm9yUHJvamVjdE5hbWUpO1xuICAgICAgICBwcm9qZWN0c0Rpdi5yZW1vdmVDaGlsZChjbG9zZUJ1dHRvbik7XG5cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGlucHV0UHJvamVjdE5hbWUpO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGlucHV0Rm9yUHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0Rm9yUHJvamVjdE5hbWUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICBpbnB1dEZvclByb2plY3ROYW1lLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RzX19uYW1lLWlucHV0Jyk7XG4gICAgXG4gICAgcHJvamVjdHNEaXYuYXBwZW5kQ2hpbGQoaW5wdXRGb3JQcm9qZWN0TmFtZSk7XG4gICAgXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uRm9yUHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjbG9zZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0c19fYnRuJywgJ3Byb2plY3RzX19idG4tLXN1Ym1pdCcpO1xuICAgIHByb2plY3RzRGl2LmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcbiAgICBzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9ICdPayc7XG5cbiAgICBwcm9qZWN0c0Rpdi5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZSk7XG5cbiAgICBzdWJtaXRCdXR0b25Gb3JQcm9qZWN0TmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IG5hbWUgPSBpbnB1dEZvclByb2plY3ROYW1lLnZhbHVlO1xuICAgICAgICBcbiAgICAgICAgaWYobmFtZSAmJiBuYW1lLmxlbmd0aCA8IDE2ICYmICFjaGVja0lkZW50aWNhbFByb2plY3QobmFtZSkpIHtcbiAgICAgICAgICAgIHByb2plY3RzRGl2LnJlbW92ZUNoaWxkKGlucHV0Rm9yUHJvamVjdE5hbWUpO1xuICAgICAgICAgICAgcHJvamVjdHNEaXYucmVtb3ZlQ2hpbGQoc3VibWl0QnV0dG9uRm9yUHJvamVjdE5hbWUpO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJ1dHRvbicpLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1uYW1lJykudGV4dENvbnRlbnQgPSBuYW1lO1xuXG4gICAgICAgICAgICBjcmVhdGVQcm9qZWN0KG5hbWUpO1xuXG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5wdXRQcm9qZWN0TmFtZSk7XG4gICAgICAgIH1lbHNlIGlmKGNoZWNrSWRlbnRpY2FsUHJvamVjdChuYW1lKSA9PSB0cnVlKSB7XG4gICAgICAgICAgICBhbGVydCgnUHJvamVjdCBuYW1lcyBzaG91bGQgYmUgZGlmZmVyZW50Jyk7XG4gICAgICAgICAgICBpbnB1dEZvclByb2plY3ROYW1lLnZhbHVlID0gJyc7XG4gICAgICAgIH1lbHNlIGlmKG5hbWUubGVuZ3RoID49IDE2KSB7XG4gICAgICAgICAgICBhbGVydCgnUHJvamVjdCBuYW1lIHNob3VsZCBiZSBsZXNzIHRoYW4gMTYgY2hhcmFjdGVycycpO1xuICAgICAgICB9ZWxzZSBpZighbmFtZSkge1xuICAgICAgICAgICAgYWxlcnQoJ0VudGVyIHByb2plY3QgbmFtZScpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrSWRlbnRpY2FsUHJvamVjdChuYW1lKSB7XG4gICAgaWYoYXJyYXlPZlByb2plY3RzLmZpbHRlcihwcm9qZWN0ID0+IHByb2plY3QubmFtZSA9PSBuYW1lKS5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVRhc2sobmV3UHJvamVjdCwgbnVtYmVyT2ZUYXNrKSB7XG4gICAgbmV3UHJvamVjdC5hcnJheU9mVG9kb3Muc3BsaWNlKG51bWJlck9mVGFzaywgMSk7IFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xufVxuXG5mdW5jdGlvbiBkZWxldGVQcm9qZWN0KG5ld1Byb2plY3QpIHtcbiAgICBhcnJheU9mUHJvamVjdHMgPSBhcnJheU9mUHJvamVjdHMuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdCAhPT0gbmV3UHJvamVjdCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoYXJyYXlPZlByb2plY3RzKSk7XG4gICAgXG4gICAgdXBkYXRlUHJvamVjdHMoKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykudGV4dENvbnRlbnQgPSAnJztcbn1cblxuZXhwb3J0IHtpbnB1dFByb2plY3ROYW1lLCBjcmVhdGVBbGxUYXNrc0luUHJvamVjdCwgYXJyYXlPZlByb2plY3RzfSIsImltcG9ydCB7IFRvZG8gfSBmcm9tIFwiLi90b2Rvc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWxsVGFza3NJblByb2plY3QsIGFycmF5T2ZQcm9qZWN0cyB9IGZyb20gXCIuL3VwZGF0ZVByb2plY3RzRE9NXCI7XG5cbmZ1bmN0aW9uIFRvZG9CdXR0b24obmV3UHJvamVjdCkge1xuICAgIGxldCB0b2RvQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICBcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJ1dHRvbicpLmFwcGVuZENoaWxkKHRvZG9CdXR0b24pO1xuICAgIHRvZG9CdXR0b24udGV4dENvbnRlbnQgPSAnQ3JlYXRlIHRvZG8nO1xuICAgIHRvZG9CdXR0b24uY2xhc3NOYW1lID0gJ2NyZWF0ZS1idXR0b25fX2J0bic7XG5cbiAgICB0b2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjcmVhdGVQb3B1cChuZXdQcm9qZWN0KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUG9wdXAobmV3UHJvamVjdCkge1xuICAgIGxldCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jb250YWluZXInKTtcbiAgICBwb3B1cC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMSknO1xuICAgIFxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHBvcHVwKSB7XG4gICAgICAgICAgICBwb3B1cC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMCknO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXREYXRhRnJvbUZvcm0sIGZhbHNlKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIikucGFyYW1ldGVyID0gbmV3UHJvamVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YUZyb21Gb3JtKGUpIHtcbiAgICBsZXQgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrbmFtZScpLnZhbHVlO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgIGxldCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS52YWx1ZTtcbiAgICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZTtcblxuICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGxldCB0YXNrID0gVG9kbyhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJhbWV0ZXIuYXJyYXlPZlRvZG9zLnB1c2godGFzayk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KGFycmF5T2ZQcm9qZWN0cykpO1xuXG4gICAgICAgIGxldCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jb250YWluZXInKTtcbiAgICAgICAgcG9wdXAuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDApJztcblxuICAgICAgICBjcmVhdGVBbGxUYXNrc0luUHJvamVjdChlLmN1cnJlbnRUYXJnZXQucGFyYW1ldGVyKTtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdFbnRlciB0YXNrIG5hbWUnKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IHsgVG9kb0J1dHRvbiB9IiwiZnVuY3Rpb24gVG9kbyhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpe1xuICAgIHJldHVybntcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICBwcmlvcml0eTogcHJpb3JpdHksXG4gICAgfVxufVxuXG5leHBvcnQge1RvZG99OyIsImltcG9ydCB7IGNyZWF0ZVRvZG8gfSBmcm9tIFwiLi91cGRhdGVUb2Rvc0RPTVwiO1xuaW1wb3J0IHsgaW5wdXRQcm9qZWN0TmFtZSB9IGZyb20gXCIuL3VwZGF0ZVByb2plY3RzRE9NXCI7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0c19fYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnB1dFByb2plY3ROYW1lKTsiXSwibmFtZXMiOlsiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRoaXMiLCJhcnJheU9mVG9kb3MiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ3VtZW50cyIsImFyZ1N0ciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIiwic3RhcnRPZkRheSIsImRpcnR5RGF0ZSIsImRhdGUiLCJzZXRIb3VycyIsImlzU2FtZURheSIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJpc1RvZGF5Iiwibm93IiwiTWF0aCIsInBvdyIsIm1pbGxpc2Vjb25kc0luSG91ciIsInRvSW50ZWdlciIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJjZWlsIiwiZmxvb3IiLCJwYXJzZUlTTyIsImRpcnR5T3B0aW9ucyIsIm9wdGlvbnMiLCJhZGRpdGlvbmFsRGlnaXRzIiwiUmFuZ2VFcnJvciIsImRhdGVTdHJpbmdzIiwic3BsaXREYXRlU3RyaW5nIiwicGFyc2VZZWFyUmVzdWx0IiwicGFyc2VZZWFyIiwicGFyc2VEYXRlIiwicmVzdERhdGVTdHJpbmciLCJ5ZWFyIiwib2Zmc2V0IiwidGltZXN0YW1wIiwidGltZSIsInBhcnNlVGltZSIsInRpbWV6b25lIiwicmVzdWx0Iiwic2V0RnVsbFllYXIiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwiZ2V0VVRDRGF0ZSIsImdldFVUQ0hvdXJzIiwiZ2V0VVRDTWludXRlcyIsImdldFVUQ1NlY29uZHMiLCJnZXRVVENNaWxsaXNlY29uZHMiLCJwYXJzZVRpbWV6b25lIiwicGF0dGVybnMiLCJkYXRlVGltZURlbGltaXRlciIsInRpbWVab25lRGVsaW1pdGVyIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4IiwidGltZXpvbmVSZWdleCIsImRhdGVTdHJpbmciLCJ0aW1lU3RyaW5nIiwiYXJyYXkiLCJzcGxpdCIsInRlc3QiLCJzdWJzdHIiLCJ0b2tlbiIsImV4ZWMiLCJyZXBsYWNlIiwicmVnZXgiLCJSZWdFeHAiLCJjYXB0dXJlcyIsIm1hdGNoIiwicGFyc2VJbnQiLCJjZW50dXJ5Iiwic2xpY2UiLCJpc1dlZWtEYXRlIiwiZGF5T2ZZZWFyIiwicGFyc2VEYXRlVW5pdCIsIm1vbnRoIiwiZGF5Iiwid2VlayIsImRheU9mV2VlayIsIl95ZWFyIiwidmFsaWRhdGVXZWVrRGF0ZSIsImlzb1dlZWtZZWFyIiwic2V0VVRDRnVsbFllYXIiLCJkaWZmIiwiZ2V0VVRDRGF5Iiwic2V0VVRDRGF0ZSIsImRheU9mSVNPV2Vla1llYXIiLCJkYXlzSW5Nb250aHMiLCJpc0xlYXBZZWFySW5kZXgiLCJ2YWxpZGF0ZURhdGUiLCJ2YWxpZGF0ZURheU9mWWVhckRhdGUiLCJtYXgiLCJ2YWx1ZSIsImhvdXJzIiwicGFyc2VUaW1lVW5pdCIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsaWRhdGVUaW1lIiwicGFyc2VGbG9hdCIsInRpbWV6b25lU3RyaW5nIiwic2lnbiIsIl9ob3VycyIsInZhbGlkYXRlVGltZXpvbmUiLCJpc0FmdGVyIiwiZGlydHlEYXRlVG9Db21wYXJlIiwiZGF0ZVRvQ29tcGFyZSIsImFycmF5T2ZQcm9qZWN0cyIsInVwZGF0ZVByb2plY3RzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwicHJvamVjdEluQXJyYXkiLCJkZWxldGVCdXR0b25JbmRleCIsInByb2plY3QiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiZGVsZXRlUHJvamVjdEJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJuZXdQcm9qZWN0IiwiZmlsdGVyIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVhdGVBbGxUYXNrc0luUHJvamVjdCIsImFwcGVuZENoaWxkIiwiY3JlYXRlVG9kYXlzVGFza3MiLCJ0b2RheUNvbnRhaW5lciIsInVwZGF0ZUN1cnJlbnRQcm9qZWN0IiwiZiIsImNyZWF0ZVVwY29taW5nVGFza3MiLCJ1cGNvbWluZ0NvbnRhaW5lciIsImluZGV4T2ZUb2RheVRhc2siLCJvcmlnaW4iLCJ0YXNrRGl2IiwidGFza0NoZWNrYm94IiwidGFza05hbWUiLCJ0YXNrT3JpZ2luIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza0RhdGUiLCJwcmlvcml0eSIsInN0eWxlIiwiYmFja2dyb3VuZCIsIm51bWJlck9mVGFzayIsInNwbGljZSIsIlRvZG9CdXR0b24iLCJjaGVja0lkZW50aWNhbFByb2plY3QiLCJ0b2RvQnV0dG9uIiwicG9wdXAiLCJ0cmFuc2Zvcm0iLCJib2R5IiwiZXZlbnQiLCJ0YXJnZXQiLCJnZXREYXRhRnJvbUZvcm0iLCJwYXJhbWV0ZXIiLCJjcmVhdGVQb3B1cCIsImUiLCJnZXRFbGVtZW50QnlJZCIsImRlc2NyaXB0aW9uIiwidGFzayIsIlRvZG8iLCJjdXJyZW50VGFyZ2V0IiwicHVzaCIsImFsZXJ0IiwicGFyc2UiLCJnZXRJdGVtIiwiaW5ib3giLCJsb2ciLCJjcmVhdGVJbmJveCIsImlucHV0UHJvamVjdE5hbWUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJvamVjdHNEaXYiLCJjbG9zZUJ1dHRvbiIsInJlbW92ZUNoaWxkIiwiaW5wdXRGb3JQcm9qZWN0TmFtZSIsInN1Ym1pdEJ1dHRvbkZvclByb2plY3ROYW1lIiwic2V0QXR0cmlidXRlIiwidGFza0luc2lkZVByb2plY3QiLCJjcmVhdGVQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==