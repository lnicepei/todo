(()=>{"use strict";class e{constructor(e){this.name=e,this.arrayOfTodos=[]}}let t=[];function n(){document.querySelector(".projects").innerHTML="";for(let e=1;e<t.length;e++)if("Inbox"!==t[e].name){let n=document.createElement("div");n.className="project",document.querySelector(".projects").appendChild(n),n.textContent=t[e].name;let r=document.createElement("button");r.textContent="x",r.addEventListener("click",(()=>{l(t[e])})),n.addEventListener("click",(()=>{a(t[e])})),n.appendChild(r)}}function r(){document.querySelector(".content").innerHTML="",document.querySelector(".create-button").innerHTML="";let e=document.createElement("div");e.className="today";let n=function(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return e=r+"-"+n+"-"+t,e}();c("Today");for(let e in t)for(let r=1;r<t[e].arrayOfTodos.length;r++)t[e].arrayOfTodos[r].date==n&&a(t[e],r);document.querySelector(".today").appendChild(e)}function o(){document.querySelector(".content").innerHTML="",document.querySelector(".create-button").innerHTML="";let e=document.createElement("div");e.className="upcoming";let n=new Date,r=String(n.getDate()).padStart(2,"0"),o=String(n.getMonth()+1).padStart(2,"0"),d=n.getFullYear();n=d+"/"+o+"/"+r,c("Upcoming");for(let e in t)for(let n=1;n<t[e].arrayOfTodos.length;n++)t[e].arrayOfTodos[n].date.substr(0,4)>d&&a(t[e],n,"upcoming"),t[e].arrayOfTodos[n].date.substr(0,4)==d&&t[e].arrayOfTodos[n].date.substr(5,2)>o&&a(t[e],n,"upcoming"),t[e].arrayOfTodos[n].date.substr(0,4)==d&&t[e].arrayOfTodos[n].date.substr(5,2)==o&&t[e].arrayOfTodos[n].date.substr(8,2)>r&&a(t[e],n,"upcoming");document.querySelector(".upcoming").appendChild(e)}function a(e,n,d){n||(document.querySelector(".content").innerHTML="",document.querySelector(".create-button").innerHTML="",c(e));for(let c=1;c<=e.arrayOfTodos.length-1;c++){let l=document.createElement("div");l.className="task";let u=document.createElement("div");u.textContent="",u.className="checkbox",l.appendChild(u);let i=document.createElement("div");i.textContent=e.arrayOfTodos[c].name,i.className="taskname",l.appendChild(i);let s=document.createElement("div");s.textContent="Project: "+e.name,s.className="father-project",l.appendChild(s);let m=document.createElement("div");m.textContent=e.arrayOfTodos[c].description,m.className="description",l.appendChild(m),1==e.arrayOfTodos[c].priority&&(u.style.background="red"),2==e.arrayOfTodos[c].priority&&(u.style.background="orange"),3==e.arrayOfTodos[c].priority&&(u.style.background="yellow"),0==e.arrayOfTodos[c].priority&&(u.style.background="white"),u.addEventListener("click",(()=>{var l;l=c,e.arrayOfTodos.splice(l,1),localStorage.setItem("projects",JSON.stringify(t)),n?n&&"upcoming"==d?o():r():a(e)}));let p=document.createElement("div");l.appendChild(p),p.className="date",p.textContent=e.arrayOfTodos[c].date,n?n==c&&document.querySelector(".content").appendChild(l):document.querySelector(".content").appendChild(l)}n||u(e),localStorage.setItem("projects",JSON.stringify(t))}function c(e){e.name?document.querySelector(".project-name").textContent=e.name:document.querySelector(".project-name").textContent=e}function d(e){for(let n=0;n<t.length;n++)if(t[n].name==e)return!1;return!0}function l(e){for(let n=0;n<t.length;n++)t[n]==e&&t.splice(n,1);localStorage.setItem("projects",JSON.stringify(t)),document.querySelector(".content").innerHTML="",document.querySelector(".create-button").innerHTML="",document.querySelector(".project-name").textContent="",n()}function u(e){let t=document.createElement("button");document.querySelector(".create-button").appendChild(t),t.textContent="Create todo",t.className="create-button__btn",t.addEventListener("click",(()=>{!function(e){let t=document.querySelector(".popup-container");t.style.transform="scale(1)",document.body.addEventListener("click",(function(e){e.target==t&&(t.style.transform="scale(0)")})),document.querySelector(".submit-button").addEventListener("click",i,!1),document.querySelector(".submit-button").parameter=e}(e)}))}function i(e){let n=document.getElementById("taskname").value,r=document.getElementById("description").value,o=document.getElementById("date").value,c=document.getElementById("priority").value;if(n){let d=function(e,t,n,r){return{name:e,description:t,date:n,priority:r}}(n,r,o,c);e.currentTarget.parameter.arrayOfTodos.push(d),localStorage.setItem("projects",JSON.stringify(t)),document.querySelector(".popup-container").style.transform="scale(0)",a(e.currentTarget.parameter)}else alert("Enter task name")}JSON.parse(localStorage.getItem("projects")||[])&&(t=JSON.parse(localStorage.getItem("projects")||[]),n()),function(){let n=new e("Inbox"),d=document.createElement("div");d.className="inbox";let l=u(n);n.arrayOfTodos.push(l),t.push(n),c("Inbox"),document.querySelector(".inbox").addEventListener("click",(()=>{a(n)})),document.querySelector(".today").addEventListener("click",r),document.querySelector(".upcoming").addEventListener("click",o),document.querySelector(".inbox").appendChild(d)}(),document.querySelector(".sidebar__btn").addEventListener("click",(function r(){this.removeEventListener("click",r);var o=document.querySelector(".projects");let a=document.createElement("button");a.textContent="x",a.addEventListener("click",(()=>{o.removeChild(c),o.removeChild(l),o.removeChild(a),this.addEventListener("click",r)}));var c=document.createElement("input");c.setAttribute("type","text"),o.appendChild(c);var l=document.createElement("button");o.appendChild(a),o.appendChild(l),l.textContent="Ok",l.addEventListener("click",(()=>{let a=c.value;a&&a.length<16&&d(a)?(o.removeChild(c),o.removeChild(l),document.querySelector(".create-button").innerHTML="",document.querySelector(".project-name").textContent=a,function(r){let o=new e(r);t.push(o),document.querySelector(".content").textContent="";let a=u(o);o.arrayOfTodos.push(a),localStorage.setItem("projects",JSON.stringify(t)),console.log(t),n()}(a),this.addEventListener("click",r)):0==d(a)?(alert("Project names should be different"),c.value=""):a.length>=16?alert("Project name should be less than 16 characters"):a||alert("Enter project name")}))}))})();